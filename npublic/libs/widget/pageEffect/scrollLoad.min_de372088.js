"use strict";$define(["pl_util","pl_readyload","cmsAjax","swiper"],function(o,_,n){return{init:function(o,i,n,a){var e=n.id,l=n.cid,t={dataType:"html"},d={};d.compId=l,d.view=n.view;function p(o){return o?f<=u+1:f<u+1}var r=n.i18n,s=n.sParams,c=n.page,w=window.location.origin+"/api/get_comp",u=1,f=Math.ceil(Number(c.totalCount)/Number(c.size));function g(o){var n;1==o?0==i.find(".pl_loading").length?(n='<span class="text-secondary pl_loading p_loading" data-ename="加载更多">'+r.loadNow+"</span>",i.find(".page_con").append(n)):i.find(".pl_loading").text(r.loadNow):2==o?0==i.find(".pl_loading").length?(n='<span class="text-secondary pl_loading p_loading" data-ename="加载更多">'+r.noMore+"</span>",i.find(".page_con").append(n)):i.find(".pl_loading").text(r.noMore):i.find(".pl_loading").remove()}s&&s.query&&0<s.query.length&&(u=1);var m;p()?g(2):(m=!1,n=function(){var o,n,i;o=$(window).scrollTop(),n=$(window).height(),(i=$("#"+l+" ."+e)).offset().top+i.outerHeight()-50<=o+n&&!m&&(window.loopTotal&&(f=Math.ceil(Number(window.loopTotal)/Number(c.size))),window.loopPage&&(u=window.loopPage,window.loopPage=null),window.loopSort&&(s.sort=window.loopSort),window.loopQuery&&(s.query=window.loopQuery),p()?g(2):(m=!0,g(1),u++,s.from=(u-1)*c.size,d.params=JSON.stringify(s),$require(["cmsAjax"],function(o){o.cmsAjax.postJson(w,d,t).then(function(o){var i;o=o,i="",$(o).each(function(o,n){$(n).hasClass(e)?i=n:0<$(n).find("."+e).length&&(i=$(n).find("."+e))}),o=$(i).find(".p_list").children(),$("#"+l).find("."+e).find(".p_list").append(o),_.lazyImg(),a(),g(3),m=!1})})))},$(document).on("scroll",n))}}});