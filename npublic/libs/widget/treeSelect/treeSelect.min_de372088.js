"use strict";!function(e){e.extend(!0,e.fn.zTree._z,{view:{clearOldFirstNode:function(e,t){for(var i=t.getNextNode();i;){if(i.isFirstNode){i.isFirstNode=!1,c.setNodeLineIcos(e,i);break}if(i.isLastNode)break;i=i.getNextNode()}},clearOldLastNode:function(e,t,i){for(t=t.getPreNode();t;){if(t.isLastNode){t.isLastNode=!1,i&&c.setNodeLineIcos(e,t);break}if(t.isFirstNode)break;t=t.getPreNode()}},makeDOMNodeMainBefore:function(e,t,i){t=l.isHidden(t,i),e.push("<li ",t?"style='display:none;' ":"","id='",i.tId,"' class='",n.className.LEVEL,i.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(e,t){l.isHidden(e,t,!1),l.initShowForExCheck(e,t),s(t,e).show()},showNodes:function(e,t,i){if(t&&0!=t.length){for(var o,n={},s=0,d=t.length;s<d;s++){var r,a=t[s];n[a.parentTId]||(r=a.getParentNode(),n[a.parentTId]=null===r?l.getRoot(e):a.getParentNode()),c.showNode(e,a,i)}for(o in n)t=l.nodeChildren(e,n[o]),c.setFirstNodeForShow(e,t),c.setLastNodeForShow(e,t)}},hideNode:function(e,t){l.isHidden(e,t,!0),t.isFirstNode=!1,t.isLastNode=!1,l.initHideForExCheck(e,t),c.cancelPreSelectedNode(e,t),s(t,e).hide()},hideNodes:function(e,t,i){if(t&&0!=t.length){for(var o,n={},s=0,d=t.length;s<d;s++){var r,a=t[s];!a.isFirstNode&&!a.isLastNode||n[a.parentTId]||(r=a.getParentNode(),n[a.parentTId]=null===r?l.getRoot(e):a.getParentNode()),c.hideNode(e,a,i)}for(o in n)t=l.nodeChildren(e,n[o]),c.setFirstNodeForHide(e,t),c.setLastNodeForHide(e,t)}},setFirstNode:function(e,t){var i=l.nodeChildren(e,t),t=l.isHidden(e,i[0],!1);0<i.length&&!t?i[0].isFirstNode=!0:0<i.length&&c.setFirstNodeForHide(e,i)},setLastNode:function(e,t){var i=l.nodeChildren(e,t),t=l.isHidden(e,i[0]);0<i.length&&!t?i[i.length-1].isLastNode=!0:0<i.length&&c.setLastNodeForHide(e,i)},setFirstNodeForHide:function(e,t){for(var i,o=0,n=t.length;o<n&&!(i=t[o]).isFirstNode;o++){if(!l.isHidden(e,i)&&!i.isFirstNode){i.isFirstNode=!0,c.setNodeLineIcos(e,i);break}i=null}return i},setFirstNodeForShow:function(e,t){for(var i,o,n,s=0,d=t.length;s<d;s++){i=t[s];var r=l.isHidden(e,i);if(!o&&!r&&i.isFirstNode){o=i;break}if(o||r||i.isFirstNode){if(o&&i.isFirstNode){i.isFirstNode=!1,n=i,c.setNodeLineIcos(e,i);break}}else i.isFirstNode=!0,o=i,c.setNodeLineIcos(e,i)}return{new:o,old:n}},setLastNodeForHide:function(e,t){for(var i,o=t.length-1;0<=o&&!(i=t[o]).isLastNode;o--){if(!l.isHidden(e,i)&&!i.isLastNode){i.isLastNode=!0,c.setNodeLineIcos(e,i);break}i=null}return i},setLastNodeForShow:function(e,t){for(var i,o,n,s=t.length-1;0<=s;s--){i=t[s];var d=l.isHidden(e,i);if(!o&&!d&&i.isLastNode){o=i;break}if(o||d||i.isLastNode){if(o&&i.isLastNode){i.isLastNode=!1,n=i,c.setNodeLineIcos(e,i);break}}else i.isLastNode=!0,o=i,c.setNodeLineIcos(e,i)}return{new:o,old:n}}},data:{initHideForExCheck:function(e,t){l.isHidden(e,t)&&e.check&&e.check.enable&&(void 0===t._nocheck&&(t._nocheck=!!t.nocheck,t.nocheck=!0),t.check_Child_State=-1,c.repairParentChkClassWithSelf&&c.repairParentChkClassWithSelf(e,t))},initShowForExCheck:function(e,t){var i;!l.isHidden(e,t)&&e.check&&e.check.enable&&(void 0!==t._nocheck&&(t.nocheck=t._nocheck,delete t._nocheck),c.setChkClass&&(i=s(t,n.id.CHECK,e),c.setChkClass(e,i,t)),c.repairParentChkClassWithSelf&&c.repairParentChkClassWithSelf(e,t))}}});var o=(e=e.fn.zTree)._z.tools,n=e.consts,c=e._z.view,l=e._z.data,s=o.$;l.isHidden=function(e,t,i){return!!t&&(e=e.data.key.isHidden,void 0!==i?("string"==typeof i&&(i=o.eqs(i,"true")),t[e]=!!i):t[e]="string"==typeof t[e]?o.eqs(t[e],"true"):!!t[e],t[e])},l.exSetting({data:{key:{isHidden:"isHidden"}}}),l.addInitNode(function(e,t,i){t=l.isHidden(e,i),l.isHidden(e,i,t),l.initHideForExCheck(e,i)}),l.addBeforeA(function(){}),l.addZTreeTools(function(n,s){s.showNodes=function(e,t){c.showNodes(n,e,t)},s.showNode=function(e,t){e&&c.showNodes(n,[e],t)},s.hideNodes=function(e,t){c.hideNodes(n,e,t)},s.hideNode=function(e,t){e&&c.hideNodes(n,[e],t)};var d=s.checkNode;d&&(s.checkNode=function(e,t,i,o){e&&l.isHidden(n,e)||d.apply(s,arguments)})});var r=l.initNode;l.initNode=function(e,t,i,o,n,s,d){o=(o||l.getRoot(e))[e.data.key.children];l.tmpHideFirstNode=c.setFirstNodeForHide(e,o),l.tmpHideLastNode=c.setLastNodeForHide(e,o),d&&(c.setNodeLineIcos(e,l.tmpHideFirstNode),c.setNodeLineIcos(e,l.tmpHideLastNode)),l.tmpHideFirstNode,s=l.tmpHideLastNode===i,r&&r.apply(l,arguments),d&&s&&c.clearOldLastNode(e,i,d)};var i=l.makeChkFlag;i&&(l.makeChkFlag=function(e,t){t&&l.isHidden(e,t)||i.apply(l,arguments)});var d=l.getTreeCheckedNodes;d&&(l.getTreeCheckedNodes=function(e,t,i,o){if(t&&0<t.length){t=t[0].getParentNode();if(t&&l.isHidden(e,t))return[]}return d.apply(l,arguments)});var a=l.getTreeChangeCheckedNodes;a&&(l.getTreeChangeCheckedNodes=function(e,t,i){if(t&&0<t.length){t=t[0].getParentNode();if(t&&l.isHidden(e,t))return[]}return a.apply(l,arguments)});var h=c.expandCollapseSonNode;h&&(c.expandCollapseSonNode=function(e,t,i,o,n){t&&l.isHidden(e,t)||h.apply(c,arguments)});var N=c.setSonNodeCheckBox;N&&(c.setSonNodeCheckBox=function(e,t,i,o){t&&l.isHidden(e,t)||N.apply(c,arguments)});var u=c.repairParentChkClassWithSelf;u&&(c.repairParentChkClassWithSelf=function(e,t){t&&l.isHidden(e,t)||u.apply(c,arguments)})}(jQuery),function(d,s){function t(n,e){this.$element=d(n),this.defaults={data:{},inputId:"_treeSelect_input",placeholder:"",zTreeOnClick:function(e,t,i,o){o.val(i.name),d(n).removeClass("show")}},this.settings=d.extend({},this.defaults,e)}var r;t.prototype={initInput:function(){var e=this.$element,t='<input type="text" id="'+this.settings.inputId+'" placeholder="'+this.settings.placeholder+'">';e.append(t);var s=e.find("input");s.focus(function(){e.addClass("show")}),s.keyup(function(){var i,n,e,o=d.trim(s.val().toUpperCase());""!==o?(i=function i(e,t){switch(t){case 0:void 0!==e.children&&null!=e.children&&d.each(e.children,function(e,t){n.push(t),i(t,0)});break;case 1:var o;void 0!==e.getParentNode()&&null!=e.getParentNode()&&(o=e.getParentNode(),n.push(o),i(o,1))}},n=[],e=(n=r.getNodesByFilter(function(e){var t=!1;return-1!==e.name.toUpperCase().indexOf(o)&&(t=!0),t})).concat(),d.each(e,function(e,t){if(void 0!==t)switch(t.level){case 0:i(t,0);break;case 1:i(t,1),i(t,0);break;case 2:i(t,1)}}),n=d.unique(n),r.hideNodes(r.transformToArray(r.getNodes())),r.showNodes(n),r.expandAll(!0)):(r.showNodes(r.transformToArray(r.getNodes())),r.expandAll(!1))}),this.dropdownMenu(e,s)},dropdownMenu:function(t,o){var n=this,e=+new Date,i='<div class="st-dropdown-menu"><div class="treeBox">'+('<ul id="_treeDom'+e+'" class="ztree" ></ul>')+"</div></div>";t.append(i),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1);i={data:{simpleData:{enable:!0,idKey:"id",pIdKey:"pId",rootPId:0}},callback:{onClick:function(e,t,i){n.settings.zTreeOnClick(e,t,i,o),n.settings.callback(e,t,i)}},view:{showIcon:!1}};r=d.fn.zTree.init(d("#_treeDom"+e),i,this.settings.data),d(s).on("click",function(e){null==e.target.closest(".treeSelect")&&t.removeClass("show")})},init:function(){this.initInput()}},d.fn.treeSelect=function(e){this.each(function(){return new t(this,e).init()})}}(jQuery,(window,document));