"use strict";$define(["pl_util","phoneCode","formUtil"],function(e,u,m){return{init:function(){var n,t,i,e=this._params,a=e.id,o=this.scope,r=e.propJson,d=r.datasource,l=r.ddItem,s=o.closest("[class^=e_form-]"),e=m.getI18n(a);function c(){var e=o.find('[name="'+a+'"]');0==e.length&&(e=o.find('[data-name="'+a+'"]')),n?e.val(n):e.val(""),$.formValidate("resetForm",o)}e.required&&(r.validate.required.msg=e.required),e.minLength&&(r.validate.minLength.msg=e.minLength),e.maxLength&&(r.validate.maxLength.msg=e.maxLength),r.showPlaceholder||(2==r.initType&&d?m.getDatasource(d,function(e){var t;try{"object"==d.type?t=e.data.current:"list"==d.type&&(t=e.data.list[0])}catch(e){}t&&(n=t[l.outCode]),c()}):(n=3==r.initType?$.getSearch()[r.customParam]:r.value,c())),o.on("keydown",function(e){13!=e.keyCode||!r.enterSubmit||0<(e=s.find('[class^="e_formBtn-"]')).length&&e.trigger("enterSubmit",a)}),o.on("blur valid",".p_input",function(){var e;e=(e=$(this).val()).trim(),r.validate.type={state:!0,value:r.type,msg:i18n.form_invalidFormat},r.validate.sensitive={state:!0},$.formValidate(e,o,r.validate)}),"countryMobile"!=r.type&&"countryTel"!=r.type||(t=o.find('[name="phoneDail"]'),i=o.find('[name="phoneIso"]'),u.countries.forEach(function(e){t.append('<option value="'.concat(e.dialCode,'">').concat(e.dialCode,"</option>"))}),(e=u.countries.find(function(e){return"CN"==e.iso2}))&&(t.val(e.dialCode),i.val(e.iso2)),o.on("change",'[name="phoneDail"]',function(){var t=this,e=u.countries.find(function(e){return e.dialCode==$(t).val()});e&&i.val(e.iso2)})),o.on("reset",function(){c()})}}});