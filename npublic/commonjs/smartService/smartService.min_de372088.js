"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var a,n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:(n=function(e){throw e},i.toString=function(){return n.toString()},i),f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){return n.apply(this,arguments)}var c,s,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:(s=function(e){l=!0,c=e},d.toString=function(){return s.toString()},d),f:function(){try{r||null==a.return||a.return()}finally{if(l)throw c}}};function d(e){return s.apply(this,arguments)}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var domain="";"local"==__ce.env&&(domain="http://"+tenant.makeDomain);var lann="hn"==tenant.language?"es":tenant.language,interwords=domain+"/npublic/commonjs/language/"+lann+".js";$define(["pl_util","/npublic/commonjs/emoji/emoji.js","/npublic/commonjs/cEditor/cEditor.js","pl_toast",interwords,"cmsAjax","/npublic/commonjs/nouglify/marked.js","/npublic/commonjs/phoneCode/phoneCode.js","css!/npublic/commonjs/datePicker/datepicker.css","/npublic/commonjs/datePicker/datepicker.js","pl_multSelect"],function(t,u,a,n,o,s,i,c,r,l){return function(){function t(e){_classCallCheck(this,t),this.res=e,this.settings=e.setting,this.automaticReply=JSON.parse(this.settings.automaticReply),this.kefuHead=this.settings.headImg?JSON.parse(this.settings.headImg).detail.watermarkUrl_symbol:"",this.colorLayout=JSON.parse(this.settings.colorLayout),this.color=this.colorLayout.windowColor,this.id=+new Date,this.iconId="smartIcon_"+this.id,this.conId="smartService_"+this.id,this.nim=null,this.time=7200,this.tTime=0,this.logout=!1,this.tmpMsg="",this.erroMsg=null,this.cEditor1=null,this.sendBtn=null,this.timeLogoutEvent=null,this.greeting=null,this.companyNoAnswerTimeout=null,this.customreNoAnswerTimeout=null,this.behaviorReportTimer=null,this.memberData=null,this.isLoginFlag=null,this.unreadMessageCount=0,this.currentLang="",!this.res.submitChatFormFlag&&this.res.enableChatForm?this.needForm=!0:this.needForm=!1,this.init(this.needForm),document.documentElement.style.setProperty("--smt-color",this.color)}return _createClass(t,[{key:"init",value:function(e){var t=this;if(this.res.enableAgentFlag){if("/login.html"==location.pathname)return!1;setTimeout(function(){t.isLogin()},1e3),this.initPageObjListener()}e?($("body").append(this.getFormlog()),this.renderForm()):($("body").append(this.getDialog()),this.renderEvent()),1==this.colorLayout.entranceLocation&&$("body").append(this.getIcon()),$(document).on("click","[smartService]",function(){0<$(".smartService.show").length?t.closeDialog():($(".greeting-btn").trigger("click"),t.showFun())});e=sessionStorage.getItem("smartServiceClose");1==this.colorLayout.showFlag&&"true"!=e?this.showFun():this.res.enableAgentFlag&&this.createGreetingPopup(),this.logNim(),this.initBehaviorReport(),window.addEventListener("beforeunload",function(){sessionStorage.setItem("currentPageUrl",window.location.href),sessionStorage.setItem("currentPageTitle",document.title),this.behaviorReportTimer&&(clearTimeout(this.behaviorReportTimer),this.behaviorReportTimer=null)})}},{key:"isLogin",value:function(){var t=this;return s.cmsAjax.get("/fwebapi/member/detail/getMemberDetail").then(function(e){return e.data||!e.data.code&&e.data.user?401==e.data.code?(t.isLoginFlag=!1,t.bindMember()):(t.isLoginFlag=!0,t.memberData=e):t.isLoginFlag=!1,t.isLoginFlag}).catch(function(e){return t.isLoginFlag=!1})}},{key:"bindMember",value:function(){var t=this;s.cmsAjax.postJson("".concat(this.res.domain,"/visitormanager/intelligent/front/bindMember?tenantId=").concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance),{account:localStorage.getItem("account_".concat(tenant.tenantId)),memberId:getCookie("_memberId")}).then(function(e){e.data&&0==e.data.code&&t.createGreetingPopup}).catch(function(e){})}},{key:"renderForm",value:function(){var t=this;$("#"+this.conId+"-form").on("click",".sm_close",function(){t.closeDialog()}).on("input blur change valid",".msgform .p_inp",function(e){t.formValid($(e.currentTarget))}).on("click",".msgform.workOrderMsgformBox .p_sub2",function(e){t.submitForm($(e.target),!1,"workOrder")}).on("click",".msgform .p_sub",function(e){t.submitForm($(e.target),!0)}).on("click",".msgform .aggree input",function(e){$(e.target).prop("checked")&&$(e.target).parent().removeClass("noAggree")}).on("click",".msgform .p_currentCode",function(e){e.stopPropagation(),$(e.currentTarget).next(".p_codeList").toggle()}).off("click",".p_phoneCode .p_codeItem").on("click",".p_phoneCode .p_codeItem",function(e){e.stopPropagation(),$(e.currentTarget).addClass("p_active").siblings().removeClass("p_active");var t=$(e.currentTarget).find(".p_enDial").text(),a=$(e.currentTarget).find(".p_enCode").text(),n=$(e.currentTarget).parents(".p_phoneCode").find(".p_currentCode span").eq(0),o=$(e.currentTarget).parents(".p_phoneCode").find("[name='mobilePrefix']");n.text(t),o.val(t+","+a),$(e.currentTarget).parent(".p_codeList").hide()}),$("#"+this.conId+"-form").find(".j_date").each(function(e,t){var a=$(t),t=a.find(".p_inp").attr("sub-type");a.datePicker({hasShortcut:!1,format:"allDate"==t?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD",hide:function(){a.find(".p_inp").trigger("change")}})}),$("#"+this.conId+"-form").find(".p_select").each(function(e,t){var a,n=$(t),o=n.find(".p_inp"),i=o.attr("sub-type"),c=n.find("input[name='dataItem']").val(),t=n.find("input[name='dataItem']").attr("placeholder")||"";c&&(a=[],(c=JSON.parse(c)).forEach(function(e){a.push({label:e.showValue,value:e.value})}),t={mult:"selMulti"==i,option:a,placeholder:t,onChange:function(e){("selMulti"==i?o.val(e.join(",")):o.val(e)).trigger("change")}},n.find(".multSelect").multSelect(t))})}},{key:"renderEvent",value:function(){var c=this;this.sendBtn=$("#"+this.conId).find(".sm_sendBtn"),this.erroMsg=$("#"+this.conId).find(".erroMsg"),this.cEditor1=new a({element:".sm_editor",height:50,windowStyle:this.colorLayout.windowStyle,voiceSwitch:this.settings.voiceSwitch,onchange:function(e){e?c.sendBtn.removeClass("disabled"):c.sendBtn.addClass("disabled")},onenter:function(){c.sendBtn.trigger("click")}}),$("#"+this.conId).on("click",".sm_close",function(){c.closeDialog()}).on("click",".sm_sendBtn",function(e){if(!$(e.currentTarget).hasClass("disabled")){$(e.currentTarget).addClass("disabled");var t=c.handleEditorData(u.emojiToHTML(c.cEditor1.getData()));if(5e3<t.length)c.errorMsgFun(i18n.sms_tolong,"warning");else{e=t.replace(/\&nbsp\;/g,"").replace(/\n/g,"").trim();if(""!=encodeURI(e).replace(/\%E2\%80\%8C/g,"")){if(c.logout)return c.tmpMsg=t,void c.logNim();c.lastSendTime=(new Date).getTime(),c.sendText(t)}else c.errorMsgFun(i18n.sms_empty,"warning")}}}).on("click",".msgbtn a,.quea a",function(e){var t=$(e.target).attr("data-url");t?window.open(t,"_blank"):(e=$(e.target).text(),c.sendText(e))}).on("click",".cardInfo",function(e){e=$(e.currentTarget).attr("data-url");e&&window.open(e,"_blank")}).on("click",".msgform.workOrderMsgformBox .p_sub2",function(e){c.checkLoginAndSubmit($(e.target),!1,"workOrder")}).on("input blur change valid",".msgform .p_inp",function(e){c.formValid($(e.target))}).on("click",".msgform .p_sub",function(e){c.submitForm($(e.target))}).on("click",".ktitle a",function(e){var t=$(e.target).attr("cg"),a=$(e.target).attr("ag"),n=$(e.target).parent(".ktitle").next(".faq");t<a?t++:a==t&&(t=0),$(e.target).attr("cg",t),n.find(".knoa").hide(),n.find('.knoa[group="'.concat(t,'"]')).show()}).on("click",".knoa a",function(e){e=$(e.target).attr("biz");c.clickKnowledge(e)}).on("click",".reply a",function(e){var t;$(e.target).hasClass("disabled")||(t={accid:c.res.account,progressId:$(e.target).attr("progressid"),operateType:$(e.target).attr("data-id"),msg:decodeURIComponent($(e.target).attr("msg"))},$(e.target).addClass("clicked"),$(e.target).parent(".reply").find("a").addClass("disabled"),e="".concat(c.res.domain,"/visitormanager/intelligent/front/contentResearch?tenantId=").concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance),s.cmsAjax.postJson(e,t).then(function(e){}))}).on("click",".msgform .p_currentCode",function(e){e.stopPropagation(),$(e.currentTarget).next(".p_codeList").toggle()}).off("click",".p_phoneCode .p_codeItem").on("click",".p_phoneCode .p_codeItem",function(e){e.stopPropagation(),$(e.currentTarget).addClass("p_active").siblings().removeClass("p_active");var t=$(e.currentTarget).find(".p_enDial").text(),a=$(e.currentTarget).find(".p_enCode").text(),n=$(e.currentTarget).parents(".p_phoneCode").find(".p_currentCode span").eq(0),o=$(e.currentTarget).parents(".p_phoneCode").find("[name='mobilePrefix']");n.text(t),o.val(t+","+a),$(e.currentTarget).parent(".p_codeList").hide()}).on("click",".sms_read",function(e){var t=$(e.currentTarget),a=t.parents(".sm_msg").find(".msgcon").text();a&&(t.hasClass("active")?($(".ttsAudio").remove(),t.removeClass("active")):$require(["/npublic/commonjs/nouglify/bdAudio.js"],function(){$("#"+c.conId).find(".sms_read").removeClass("active"),t.addClass("active"),$.bdAudio({text:a,onEnd:function(){t.removeClass("active")},onError:function(){t.removeClass("active")}})}))}).on("click",".sm_tab_link",function(e){var t=$(e.currentTarget).data("tab");$(".sm_tab_link").removeClass("active"),$(e.currentTarget).addClass("active"),$(".sm_tab_content").removeClass("active").hide(),$("#"+t+"-tab").addClass("active").show(),"member"===t&&c.loadMemberInfo()}).on("click",".quick_label_item",function(e){var t=$(e.currentTarget).data("type"),a=$(e.currentTarget).data("index");if(c.res.quickLabel&&Array.isArray(c.res.quickLabel)&&!(a>=c.res.quickLabel.length)){var n=c.res.quickLabel[a];switch(t){case 0:var o=c.cEditor1.getData();if(o.trim().startsWith("#".concat(i18n.aiSearch||"AI搜索","：")))return c.cEditor1.focus(),void setTimeout(function(){var e,i,c,s,r,l,t=document.querySelector(".cEditor-area");!t||-1!==(e=(t.textContent||t.innerText).indexOf("#".concat(i18n.aiSearch||"AI搜索","：")))&&(i=document.createRange(),c=window.getSelection(),s=e+"#".concat(i18n.aiSearch||"AI搜索","：").length,r=0,l=!1,function e(t){if(!l)if(t.nodeType===Node.TEXT_NODE){var a=t.textContent,a=r+a.length;if(r<=s&&s<=a)return i.setStart(t,s-r),i.collapse(!0),c.removeAllRanges(),c.addRange(i),void(l=!0);r=a}else if(t.nodeType===Node.ELEMENT_NODE){var n=_createForOfIteratorHelper(t.childNodes);try{for(n.s();!(o=n.n()).done;){var o=o.value;if(l)break;e(o)}}catch(e){n.e(e)}finally{n.f()}}}(t))},0);"function"==typeof c.cEditor1.setData?c.cEditor1.setData("#".concat(i18n.aiSearch||"AI搜索","：")+o):"function"==typeof c.cEditor1.setValue?c.cEditor1.setValue("#".concat(i18n.aiSearch||"AI搜索","：")+o):(i=document.querySelector(".cEditor-area"))&&(i.innerHTML="#".concat(i18n.aiSearch||"AI搜索","：")+o),c.cEditor1.focus(),setTimeout(function(){var e,t,a=document.querySelector(".cEditor-area");a&&(e=document.createRange(),t=window.getSelection(),e.selectNodeContents(a),e.collapse(!1),t.removeAllRanges(),t.addRange(e))},0);break;case 1:n.desc&&c.sendText(n.desc);break;case 2:var i="",o="";n.linkUrl&&(i=-1<n.linkUrl.indexOf("http")?n.linkUrl:location.origin+n.linkUrl),o=0==n.windowType?"_self":"_blank",window.open(i,o);break;case 3:n.threePartyTools&&n.threePartyTools.account&&c.launchThirdPartyApp(n.threePartyTools.type,n.threePartyTools.account,n.threePartyTools,$(e.currentTarget))}}}).on("click",".m_tags_info_item",function(e){e=$(e.currentTarget).data("tag");switch(e){case i18n.myProfile||"我的资料":window.open("/sys/information");break;case i18n.myOrder||"我的订单":window.open("/sys/order/list");break;case i18n.myFavorite||"我的收藏":window.open("/sys/collection");break;case i18n.myService||"我的服务":window.open("/sys/workorder/list")}}).on("click",".relatedIssuesItem",function(e){e=$(e.currentTarget).text();c.sendText(e)})}},{key:"loadMemberInfo",value:function(){var e=this,t=$("#member-tab");0<t.find(".memberBox").length||(t.find(".member-loading").show(),this.isLogin().then(function(){t.find(".member-loading").hide(),e.renderMemberInfo()}).catch(function(){t.find(".member-loading").hide(),e.renderMemberInfo()}))}},{key:"renderMemberInfo",value:function(){var e=$("#member-tab"),t=this.memberData&&this.memberData.data&&this.memberData.data.user&&this.memberData.data.user.type||"",a=$.handleDataImg((null===(n=this.memberData)||void 0===n||null===(o=n.data)||void 0===o||null===(i=o.user)||void 0===i?void 0:i.avatar)||this.kefuHead)||"/npublic/commonjs/smartService/kefu.png",n="";this.res.memberSet&&Array.isArray(this.res.memberSet)&&(n=this.res.memberSet.map(function(e,t){switch(e){case"我的资料":e=i18n.myProfile;break;case"我的订单":e=i18n.myOrder;break;case"我的服务":e=i18n.myService;break;case"我的收藏":e=i18n.myFavorite}return'<div class="m_tags_info_item" data-tag="'.concat(e,'" data-index="').concat(t,'">\n                        <span class="tag-icon"></span>').concat(e,"\n                    </div>")}).join(""));var o="",i="",i=1==t?'<svg t="1767579004512" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="55622" width="200" height="200"><path d="M928.914286 934.765714H103.862857c-21.942857 0-40.96-10.24-40.96-33.645714 0-23.405714 17.554286-35.108571 40.96-35.108571h23.405714v-687.542858c0-42.422857 32.182857-76.068571 73.142858-76.068571h396.434285c39.497143 0 73.142857 33.645714 73.142857 76.068571v106.788572h168.228572c39.497143 0 73.142857 33.645714 73.142857 76.068571v504.685715h20.48c21.942857 0 40.96 11.702857 40.96 35.108571-2.925714 21.942857-20.48 33.645714-43.885714 33.645714zM610.011429 340.845714V159.451429H188.708571v705.097142h421.302858V340.845714z m242.834285 0H668.525714v525.165715h182.857143V340.845714z m-512 35.108572h-70.217143c-21.942857 0-40.96-19.017143-40.96-42.422857 0-23.405714 17.554286-42.422857 40.96-42.422858h70.217143c21.942857 0 40.96 19.017143 40.96 42.422858 0 23.405714-19.017143 42.422857-40.96 42.422857z m0 156.525714h-70.217143c-21.942857 0-40.96-19.017143-40.96-42.422857 0-23.405714 17.554286-42.422857 40.96-42.422857h70.217143c21.942857 0 40.96 19.017143 40.96 42.422857 0 23.405714-19.017143 42.422857-40.96 42.422857z m0 156.525714h-70.217143c-21.942857 0-40.96-19.017143-40.96-42.422857 0-23.405714 17.554286-42.422857 40.96-42.422857h70.217143c21.942857 0 40.96 19.017143 40.96 42.422857 0 23.405714-19.017143 42.422857-40.96 42.422857z m184.32-313.051428h-70.217143c-21.942857 0-40.96-19.017143-40.96-42.422857 0-23.405714 17.554286-42.422857 40.96-42.422858h70.217143c21.942857 0 40.96 19.017143 40.96 42.422858 0 23.405714-19.017143 42.422857-40.96 42.422857z m223.817143 181.394285c-21.942857 0-40.96-19.017143-40.96-42.422857v-40.96c0-23.405714 17.554286-42.422857 40.96-42.422857 21.942857 0 40.96 19.017143 40.96 42.422857v40.96c-1.462857 23.405714-19.017143 42.422857-40.96 42.422857z m0 190.171429c-21.942857 0-40.96-19.017143-40.96-42.422857v-40.96c0-23.405714 17.554286-42.422857 40.96-42.422857 21.942857 0 40.96 19.017143 40.96 42.422857v40.96c-1.462857 23.405714-19.017143 42.422857-40.96 42.422857zM525.165714 532.48h-70.217143c-21.942857 0-40.96-19.017143-40.96-42.422857 0-23.405714 17.554286-42.422857 40.96-42.422857h70.217143c21.942857 0 40.96 19.017143 40.96 42.422857 0 23.405714-19.017143 42.422857-40.96 42.422857z m0 156.525714h-70.217143c-21.942857 0-40.96-19.017143-40.96-42.422857 0-23.405714 17.554286-42.422857 40.96-42.422857h70.217143c21.942857 0 40.96 19.017143 40.96 42.422857 0 23.405714-19.017143 42.422857-40.96 42.422857z m0 0" fill="" p-id="55623"></path></svg>':'<svg t="1767579610704" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="56692" width="200" height="200"><path d="M817.75830078125 230.556640625H206.24082031250003c-48.2361328125 0-87.36767578125 38.7703125-87.36767578125 86.5775390625v389.69824218749994c0 47.82392578125 39.131542968750004 86.61181640625 87.36767578125 86.61181640625h611.5174804687499c48.251953125 0 87.36767578125-38.787890625 87.36767578125-86.61181640625v-389.69824218749994c0-47.8072265625-39.11396484375-86.5775390625-87.36767578125-86.5775390625zM354.45341796875 359.9580078125c42.08466796875 0 82.90019531249999 34.80205078125 82.90019531249999 72.30234375s-39.268652343750006 75.27392578125-82.90019531249999 75.27392578125c-42.08642578125 0-80.73808593749999-41.75947265625-80.73808593749999-79.224609375 0-37.4994140625 38.651660156249996-68.35166015625 80.73808593749999-68.35166015625zM504.43261718749994 664.0419921875H206.08613281249995v-15.33955078125c0-73.69365234374999 46.9125-128.28515625 149.46503906249998-128.28515625 102.53583984375 0 148.88144531249998 51.996972656249994 148.88144531249998 121.809375 0 2.78173828125 0.18896484375 19.032714843750004 0 21.8162109375z m313.61923828125003-54.333984375c0 5.97744140625-6.2525390624999995 10.787695312499999-14.0185546875 10.787695312499999H570.01923828125c-7.7642578124999995 0-14.034375-4.81025390625-14.034375-10.787695312499999v-21.64306640625c0-5.961621093750001 6.270996093749999-10.8228515625 14.034375-10.8228515625h234.0140625c7.766015625 0 14.0185546875 4.86123046875 14.0185546875 10.8228515625v21.64306640625z m0-87.36679687499999c0 5.97744140625-6.2525390624999995 10.8228515625-14.0185546875 10.8228515625H570.01923828125c-7.7642578124999995 0-14.034375-4.84541015625-14.034375-10.8228515625v-21.64306640625c0-5.9607421875 6.270996093749999-10.82197265625 14.034375-10.82197265625h234.0140625c7.766015625 0 14.0185546875 4.86123046875 14.0185546875 10.82197265625v21.64306640625z m0-86.16357421874999c0 5.95986328125-6.2525390624999995 10.82109375-14.0185546875 10.82109375H570.01923828125c-7.7642578124999995 0-14.034375-4.8603515625-14.034375-10.82109375v-21.6439453125c0-5.9958984375 6.270996093749999-10.8228515625 14.034375-10.8228515625h234.0140625c7.766015625 0 14.0185546875 4.826953124999999 14.0185546875 10.8228515625v21.6439453125z m0 0" p-id="56693" fill=""></path></svg>',o=this.isLoginFlag?'\n                    <div class="memberBox">\n                        <div class="m_cards">\n                            <div class="m_icons">\n                                '.concat(i,'\n                            </div>\n                            <div class="member_img">\n                                <img src="').concat(a,'" alt="').concat(this.settings.name,'" la="la" />\n                            </div>\n                            <div class="member_info">\n                                <div class="member_title">').concat(i18n.memberNum||"会员号","：").concat(getCookie("_memberId")||"******",'</div>\n                                <div style="display: none;"><svg t="1766114967975" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10638" width="200" height="200"><path d="M68.266667 955.733333V519.304533c0-63.488 48.196267-114.8928 107.656533-114.8928h78.848v86.152534H175.9232c-14.882133 0-26.965333 12.9024-26.965333 28.740266v350.208H273.066667V242.688C273.066667 184.046933 321.536 136.533333 381.201067 136.533333h329.864533C770.798933 136.533333 819.2 184.046933 819.2 242.688V273.066667l28.8768 0.068266C907.537067 273.066667 955.733333 324.539733 955.733333 387.959467V955.733333H68.266667z m642.798933-739.601066H381.201067a26.760533 26.760533 0 0 0-27.0336 26.624v626.756266H409.6v-65.672533C409.6 736.938667 455.4752 682.666667 512 682.666667s102.4 54.272 102.4 121.173333v65.672533h123.630933l0.068267-626.824533a26.760533 26.760533 0 0 0-27.0336-26.555733z m137.0112 143.086933H819.2v510.293333h55.773867V387.959467a28.330667 28.330667 0 0 0-21.435734-28.125867l-5.461333-0.6144zM512 768c-16.725333 0-30.242133 16.042667-30.242133 35.84l-0.068267 65.672533h60.552533v-65.672533c0-19.797333-13.5168-35.84-30.242133-35.84zM637.815467 477.866667c24.7808 0 44.8512 15.291733 44.8512 34.133333s-20.0704 34.133333-44.8512 34.133333H454.4512C429.6704 546.133333 409.6 530.8416 409.6 512s20.0704-34.133333 44.8512-34.133333h183.364267z m0-136.533334c24.7808 0 44.8512 15.291733 44.8512 34.133334s-20.0704 34.133333-44.8512 34.133333H454.4512C429.6704 409.6 409.6 394.308267 409.6 375.466667s20.0704-34.133333 44.8512-34.133334h183.364267z" fill="#FFFFFF" p-id="10639"></path></svg>xxx公司</div>\n                            </div>\n                            <div class="m_mark"></div>\n                        </div>\n                        <div class="').concat(""==n?"hideDom":"",'">\n                            <div class="m_tags_title"><svg t="1766114780148" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10493" width="200" height="200"><path d="M519.68 27.136c25.984 5.632 46.528 25.6 53.12 51.392l75.264 295.168a25.6 25.6 0 0 0 19.2 18.624l276.928 62.336a70.4 70.4 0 0 1-4.608 138.24l-268.8 41.856a25.6 25.6 0 0 0-21.184 20.416l-58.24 297.152a70.4 70.4 0 0 1-137.984 0.64l-61.44-297.792a25.6 25.6 0 0 0-21.248-20.16L88.32 592.32a70.4 70.4 0 0 1-5.12-138.24l269.376-61.312a25.6 25.6 0 0 0 19.328-19.456l63.936-292.48a70.4 70.4 0 0 1 83.84-53.76zM169.984 732.16a118.4 118.4 0 1 1 0 236.8 118.4 118.4 0 0 1 0-236.8zM504.96 123.584l-58.112 266.112a102.4 102.4 0 0 1-77.312 77.952l-236.416 53.76 248.96 37.696a102.4 102.4 0 0 1 82.752 71.68l2.24 8.896 54.976 266.432 52.096-265.728a102.4 102.4 0 0 1 75.776-79.68l8.96-1.856 235.52-36.672-244.096-54.912a102.4 102.4 0 0 1-73.984-65.472l-2.752-9.152L504.96 123.584z m-334.976 685.44a41.6 41.6 0 1 0 0 83.2 41.6 41.6 0 0 0 0-83.2zM850.816 32.832a38.4 38.4 0 0 1 38.4 38.4v60.48l64 0.384a38.4 38.4 0 0 1-0.448 76.8l-63.552-0.384v59.2a38.4 38.4 0 0 1-76.8 0v-59.584l-50.88-0.256a38.4 38.4 0 0 1 0.384-76.8l50.496 0.256v-60.096a38.4 38.4 0 0 1 38.4-38.4z" fill="#165DFC" p-id="10494"></path></svg>').concat(i18n.quickOperation||"快捷操作",'</div>\n                            <div class="m_tags_info">\n                                ').concat(n,"\n                            </div>\n                        </div>\n                    </div>\n                "):'<div class="memberBox">\n                    <div class="member_info">\n                        <div class="member_title toLogin">\n                            <p>'.concat(i18n.loginMore||"登录后享受更多会员服务",'</p>\n                            <a href="/login.html" target="_blank">').concat(i18n.toLogin||"去登录","</a>\n                        </div>\n                    </div>\n                </div>");e.html(o),e.off("click",".m_tags_info_item").on("click",".m_tags_info_item",function(e){e=$(e.currentTarget).data("tag");switch(e){case i18n.myProfile||"我的资料":window.open("/sys/information");break;case i18n.myOrder||"我的订单":window.open("/sys/order/list");break;case i18n.myFavorite||"我的收藏":window.open("/sys/collection");break;case i18n.myService||"我的服务":window.open("/sys/workorder/list")}})}},{key:"launchThirdPartyApp",value:function(e,t,a,n){switch(e){case 1:window.location.href="tencent://message/?uin=".concat(t);break;case 2:break;case 3:window.location.href="http://amos.alicdn.com/getcid.aw?v=2&uid=".concat(t,"&site=cntaobao&s=2&groupid=0&charset=utf-8");break;case 4:window.location.href="skype:".concat(t,"?chat");break;case 5:window.location.href="https://api.whatsapp.com/send?phone=".concat(t,"&text=Hello");break;case 6:case 7:this.showWeChatPrompt(a,n);break;case 8:window.location.href="mailto:".concat(t);break;case 9:window.location.href="tel:".concat(t);break;case 10:case 11:case 12:window.location.href="tel:".concat(link)}}},{key:"showWeChatPrompt",value:function(e,t){t.addClass("active"),t.siblings().hasClass("active")&&($(".wechat-prompt").remove(),t.siblings().removeClass("active"));var a='\n                <div class="wechat-prompt">\n                    <div style="text-align: center;">\n                        <img src="'.concat(__ce.imgStaticUrl[0]+"/"+e.imageUrlArr[0].detail.watermarkUrl_symbol,'" alt="微信二维码" style="width: 120px; height: 120px; margin: 0 auto; display: block;" />\n                    </div>\n                    <div class="custom_close"><svg t="1767872926130" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="30359" width="200" height="200"><path d="M512 70.772034c-243.685892 0-441.227966 197.550776-441.227966 441.227966 0 243.685892 197.542074 441.227966 441.227966 441.227966S953.227966 755.685892 953.227966 512C953.227966 268.32281 755.685892 70.772034 512 70.772034zM713.983275 656.253462c15.919864 15.960476 15.919864 41.780941 0 57.700805-15.948873 15.960476-41.780941 15.960476-57.729813 0L512 569.712408l-144.294074 144.241858c-15.908261 15.960476-41.740329 15.960476-57.692102 0-15.908261-15.919864-15.908261-41.740329 0-57.700805l144.28247-144.241858-144.28247-144.28247c-15.908261-15.919864-15.908261-41.751932 0-57.700805 15.948873-15.919864 41.780941-15.919864 57.692102 0l144.294074 144.28247 144.253462-144.28247c15.948873-15.919864 41.780941-15.919864 57.729813 0 15.919864 15.948873 15.919864 41.780941 0 57.700805l-144.28247 144.28247L713.983275 656.253462z" p-id="30360"></path></svg></div>\n                </div>\n            '),n=$(event.target).closest(".quick_label_item").offset(),e=$(window).width(),a=$(a);$("body").append(a),a.css({top:n.top-a.outerHeight()-10,left:n.left-23}),n.left+$(".wechat-prompt").width()>e&&($(".wechat-prompt").addClass("windowRight"),a.css({top:top,left:"auto",right:20})),$(".custom_close").on("click",function(){$(".wechat-prompt").remove(),t.removeClass("active")}),$(window).on("scroll",function(){$(".wechat-prompt").remove(),t.removeClass("active")}),$(".quick_labels").on("scroll",function(){$(".wechat-prompt").remove(),t.removeClass("active")})}},{key:"clickKnowledge",value:function(e){this.handleReply(!0);var t={accid:this.res.account,bizId:e},e="".concat(this.res.domain,"/visitormanager/intelligent/front/knowledgeTitleClick?tenantId=").concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance);s.cmsAjax.postJson(e,t).then(function(e){})}},{key:"handleReply",value:function(e){e?($(".sm_reply").remove(),this.handleMsg({type:"text",from:"reply",text:'<div class="dot-loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>'})):$(".sm_reply").remove()}},{key:"getFormValue",value:function(e){if(e.hasClass("p_checkbox")||e.hasClass("p_radio")){var t=e.find("input:checked"),a=[];return t.each(function(e,t){a.push($(t).val())}),a.join(",")}return e.val()?e.val().trim():""}},{key:"formValid",value:function(e){var t=e.attr("data-type"),a=e.parents(".formIt"),n=a.find(".errorMsg"),o=this.getFormValue(e),e=a.attr("required");o?"mobile"!=t||/^[0-9\+-]+$/.test(o)?"email"!=t||/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,5}$/.test(o)?(a.removeClass("invalid"),n.text("")):(a.addClass("invalid"),n.text(i18n.form_invalidEmail)):(a.addClass("invalid"),n.text(i18n.form_invalidMobile)):e?(a.addClass("invalid"),n.text(i18n.sms_error2)):(a.removeClass("invalid"),n.text(""))}},{key:"submitForm",value:function(e,t,a){var n,o=this,i=e.parents(".msgform");i.find(".p_inp").trigger("valid"),0==i.find(".invalid").length&&(0<(e=i.find(".aggree input")).length&&!e.prop("checked")&&t?e.parent().addClass("noAggree"):(e.parent().removeClass("noAggree"),n={accid:this.res.account,terminal:this.getTerminal(),source:location.href},localStorage.getItem("ga4_cbo_custom_id")&&(n.deviceNo=localStorage.getItem("ga4_cbo_custom_id")),t||(n.progressId=i.attr("progressId")),i.find(".p_inp").each(function(e,t){n[$(t).attr("name")]=o.getFormValue($(t))}),t||this.handleReply(!0),e="",a?(e="".concat(this.res.domain,"/visitormanager/intelligent/front/addWork?tenantId=").concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance),n.memberId=getCookie("_memberId")||""):e="".concat(this.res.domain,"/visitormanager/intelligent/front/addClue?tenantId=").concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance),s.cmsAjax.postJson(e,n).then(function(e){200==e.status&&e.data&&(200==e.data.code?t?(o.needForm=!1,o.init(!1),o.showFun()):(a&&i.hide().siblings(".successBox").show(),o.handleReply(!1),o.errorMsgFun(i18n.sms_success,"success")):10004==e.data.code&&(t?$.pl_toast({msg:i18n.sms_error1}):(o.handleReply(!1),o.errorMsgFun(i18n.sms_error1,"warning"))))})))}},{key:"closeDialog",value:function(){sessionStorage.setItem("smartServiceClose","true"),this.needForm?$("#"+this.conId+"-form").removeClass("show"):($("#"+this.conId).removeClass("show"),this.cEditor1.clear(),clearInterval(this.greeting),clearTimeout(this.customreNoAnswerTimeout),clearTimeout(this.companyNoAnswerTimeout),this.logout||this.renderLogout(!0),this.cleanup())}},{key:"renderLogout",value:function(e){this.logout=!0,clearInterval(this.timeLogoutEvent),e||this.handleMsg('<p class="prompt">———  '.concat(i18n.sms_dk,"   ———</p>"))}},{key:"handleEditorData",value:function(t){var e=t.match(/<span[\w\W]*?name=("|')/g);e&&e.forEach(function(e){t=t.replace(new RegExp(e,"g"),"")});e=new RegExp(/\][\w\W]*?<\/span>/,"g"),e=t.match(e);return e&&e.forEach(function(e){t=t.replace(new RegExp(e,"g"),"]")}),t=(t=(t=(t=t.replace(/<div>/g,"\n")).replace(/<\/div>/g,"")).replace(/<br>/g,"\n")).replace(/\&nbsp\;/g," ")}},{key:"errorMsgFun",value:function(e,t){t=t||"error";this.errorToast({type:t,msg:e})}},{key:"errorToast",value:function(e){var t=$("#"+this.conId+" .sm_dialog"),a="toast_"+ +new Date,n={success:'<svg t="1723688024929" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1723" width="200" height="200"><path d="M511.434623 63.564711c-247.428276 0-448.010617 200.582341-448.010617 448.01164 0 247.430322 200.581318 448.01164 448.010617 448.01164 247.432369 0 448.012663-200.581318 448.012663-448.01164C959.447287 264.147052 758.865969 63.564711 511.434623 63.564711zM773.519714 382.576325 447.871959 704.039781 245.771031 507.044128l63.996546-68.093864 138.15964 138.15964 261.086343-261.087367L773.519714 382.576325z" p-id="1724"></path></svg>',warning:'<svg t="1723688042921" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1869" width="200" height="200"><path d="M511.6 64.6c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m-0.1 717.9c-29.8 0-54-24.2-54-54s24.2-54 54-54 54 24.2 54 54c-0.1 29.9-24.2 54-54 54z m51.4-216.1c-1.5 27.9-24.1 50.1-51 53 2 0.2 3.7 1.1 5.7 1.1h-11.2c1.9 0 3.7-0.9 5.6-1.1-27-2.9-49.1-24.6-50.4-53l-12.4-269.7c-1.4-29.9 22-54.2 51.9-54.2H526c30 0 53.1 23.7 51.4 54.2l-14.5 269.7z" p-id="1870"></path></svg>',error:'<svg t="1723686236199" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1577" width="200" height="200"><path d="M827.392 195.584q65.536 65.536 97.792 147.456t32.256 167.936-32.256 167.936-97.792 147.456-147.456 98.304-167.936 32.768-168.448-32.768-147.968-98.304-98.304-147.456-32.768-167.936 32.768-167.936 98.304-147.456 147.968-97.792 168.448-32.256 167.936 32.256 147.456 97.792zM720.896 715.776q21.504-21.504 18.944-49.152t-24.064-49.152l-107.52-107.52 107.52-107.52q21.504-21.504 24.064-49.152t-18.944-49.152-51.712-21.504-51.712 21.504l-107.52 106.496-104.448-104.448q-21.504-20.48-49.152-23.04t-49.152 17.92q-21.504 21.504-21.504 52.224t21.504 52.224l104.448 104.448-104.448 104.448q-21.504 21.504-21.504 51.712t21.504 51.712 49.152 18.944 49.152-24.064l104.448-104.448 107.52 107.52q21.504 21.504 51.712 21.504t51.712-21.504z" p-id="1578"></path></svg>'};t.append('\n                <div class="errorCon">\n                    <div class="errorToast '.concat(e.type,'" id="').concat(a,'">\n                        ').concat(n[e.type]||n.error,"<span>").concat(e.msg,"</span>\n                    </div>\n                </div>\n            "));setTimeout(function(){$("#"+a).remove()},2e3)}},{key:"sendText",value:function(t){var a=this;this.sensitiveFun(t,function(e){0<e.length?a.errorToast({type:"error",msg:window.i18n.form_mgc+":"+e.join(",")}):a.nim.sendText({scene:"p2p",to:a.settings.account,text:t,done:function(e,t){e?a.errorMsgFun(i18n.sms_fail,"error"):(a.handleMsg(t),a.handleReply(!0),a.cEditor1.clear(),a.cEditor1.focus(),a.res.enableSmartCustomer||(a.companyNoAnswerFun(),clearInterval(a.greeting),clearTimeout(a.customreNoAnswerTimeout)))}})})}},{key:"sensitiveFun",value:function(e,t){s.cmsAjax.postJson("/fwebapi/cms/sensitive/findContentContainWords",{content:e,type:1}).then(function(e){try{t(e.data.result)}catch(e){t([])}}).catch(function(e){t([])})}},{key:"logNim",value:function(){var t=this;$require(["/npublic/commonjs/smartService/NIM_Web_SDK_v9.6.4.js"],function(){t.tTime=0,t.timeLogout(),t.nim?t.nim.connect():t.nim=SDK.NIM.getInstance({debug:!1,appKey:t.res.appKey,account:t.res.account,token:t.res.token,db:!1,onconnect:function(){t.logout=!1,t.tmpMsg&&(t.sendText(t.tmpMsg),t.tmpMsg=""),t.hideLoadingMessage(),t.res.enableSmartCustomer||t.greetingFun(),t.unreadMessageCount=t.getUnreadCountFromStorage(),t.updateUnreadBadge()},onwillreconnect:function(){},ondisconnect:function(){},onerror:function(){},onroamingmsgs:function(e){e.msgs.forEach(function(e){t.handleMsg(e)})},onofflinemsgs:function(e){e.msgs.forEach(function(e){t.handleMsg(e)})},onmsg:function(e){t.handleReply(!1),t.hideLoadingMessage(),0<$(".smartService.show").length||t.unreadMessageCount++,t.handleMsg(e,!0),t.updateUnreadBadge(),t.res.enableSmartCustomer||(t.noAnswerFun(),clearTimeout(t.companyNoAnswerTimeout))}})})}},{key:"companyNoAnswerFun",value:function(){var t=this,e=this.automaticReply.companyNoAnswerInterval,a="m"==this.automaticReply.companyNoAnswerIntervalUnit?60:1;this.companyNoAnswerTimeout=setTimeout(function(){var e={type:"text",from:t.settings.account,text:t.automaticReply.companyNoAnswerSpeech};t.handleMsg(e),clearTimeout(t.companyNoAnswerTimeout)},e*a*1e3)}},{key:"noAnswerFun",value:function(){var t=this,e=this.automaticReply.noAnswerInterval,a="m"==this.automaticReply.noAnswerIntervalUnit?60:1;this.customreNoAnswerTimeout=setTimeout(function(){var e={type:"text",from:t.settings.account,text:t.automaticReply.noAnswerSpeech};t.handleMsg(e),clearTimeout(t.customreNoAnswerTimeout)},e*a*1e3)}},{key:"greetingFun",value:function(){for(var e=this,t=[],a=0;a<this.automaticReply.greetingRotationNum;a++)this.automaticReply.greeting1&&t.push({type:"text",from:this.settings.account,text:this.automaticReply.greeting1}),this.automaticReply.greeting2&&t.push({type:"text",from:this.settings.account,text:this.automaticReply.greeting2}),this.automaticReply.greeting3&&t.push({type:"text",from:this.settings.account,text:this.automaticReply.greeting3});a=0;this.handleMsg(t[a]),this.greeting=setInterval(function(){return++a>=t.length?(a=0,void clearInterval(e.greeting)):void e.handleMsg(t[a])},1e3*this.automaticReply.speechContentInterval)}},{key:"timeLogout",value:function(){var e=this;this.timeLogoutEvent=setInterval(function(){e.tTime++,e.tTime>=e.time&&e.renderLogout()},1e3)}},{key:"handleMsg",value:function(e,t){var a=this;e.from==this.settings.account?(e.time||(e.time=+new Date),$(".sm_output").append(this.adminHtml(e,t))):e.from==this.res.account?(e.time||(e.time=+new Date),$(".sm_output").append(this.customerHtml(e))):"reply"==e.from?(e.time||(e.time=+new Date),$(".sm_output").append(this.adminHtml(e))):$(".sm_output").append(e),this.res.memberFlag&&(!1===this.isLoginFlag?setTimeout(function(){a.addLoginPromptToFirstMessage()},0):this.isLoginFlag),$(".sm_output").scrollTop(99999999),$('.sm_output a[href!="javascript:;"]').attr("target","_blank"),$('.sm_output a[href^="mailto:"],.sm_output a[href^="tel:"]').attr("rel","nofollow"),setTimeout(function(){$(".sm_output").scrollTop(99999)},1e3),this.tTime=0;var n=(e.from==this.settings.account||e.from==this.res.account||"reply"==e.from)&&!t,t=0<$(".smartService.show").length;n&&t&&this.lastSendTime?(e.time||+new Date)>this.lastSendTime&&this.addCurrentSessionTipIfNeeded():!this.lastSendTime&&this.res.enableAgentFlag&&this.manageMessagesDisplay(),this.showLastRelatedIssues()}},{key:"addLoginPromptToFirstMessage",value:function(){var t=this.currentLang||"zh_CN",e=[{zh_CN:"登录会员,可享受更多专属服务和优惠"},{en:"Logged-in members, can enjoy more exclusive services and discounts"}].filter(function(e){return e[t]})[0][t],a=$(".sm_output").find(".sm_msg"),n=new Date;n.setHours(0,0,0,0);var o=n.getTime(),i=null;a.each(function(){var e=parseInt($(this).attr("data-time"))||0;if(o<=e)return i=$(this),!1}),!i||i.find(".login-prompt").length||0<(a=i.find(".msgcon .cItem").last()).length&&(e=$('<div class="cItem login-prompt" style="font-weight: 600;"><a href="/login.html" target="_blank">'.concat(e.split(",")[0]||i18n.loginMember||"登录会员","</a>").concat(e.split(",")[1]||i18n.loginMore2||"可享受更多专属服务和优惠","</div>")),a.after(e))}},{key:"addCurrentSessionTipIfNeeded",value:function(){var e,t,a=$(".sm_output"),n=a.find(".sm_msg");0<a.find(".current-session-tip").length||0<n.length&&this.lastSendTime&&(e=null,n.each(function(){if(($(this).data("time")||+new Date($(this).find(".time").text()))>this.lastSendTime)return e=$(this),!1}.bind(this)),e?(t=$('<div class="current-session-tip" style="text-align: center; padding: 5px; color: #666; font-size: 12px;display:none">以下是当前会话</div>'),e.before(t)):(t=$('<div class="current-session-tip" style="display: block; overflow: hidden; text-align: center; padding: 20px 5px; color: #666; font-size: 12px;display:none">以下是当前会话</div>'),n.last().before(t)))}},{key:"adminHtml",value:function(e,t){var a=[],n=[],o="";if("text"==e.type)a.push(this.getMsg(e.text,"text"));else if("custom"==e.type)try{var i,c=JSON.parse(e.content);for(i in c.lang&&(this.currentLang=c.lang),c.paramSort){var s=c.paramSort[i],r=this.getMsg(c[s],s,t);"card"!=s&&"form"!=s&&"knowledge"!=s?(r&&a.push(r),"questionTip"==s&&(o="w100")):n.push(r)}}catch(e){}var l="";0<a.length&&(l='<div class="msgcon '.concat(o,'">').concat(a.join(""),"</div>"));var d="";return 1==this.settings.voiceSwitch&&(d='<a href="javascript:;" class="sms_read"><svg t="1758765065638" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19162" width="128" height="128"><path d="M534.002 120.373c-9.072 0-18.606 3.172-26.314 9.534L280.869 325.875H121.643c-34.475 0-62.154 27.679-62.154 61.702l-0.452 268.551c0 34.023 28.131 62.145 62.606 62.145h161.494l223.648 176.016c8.159 6.805 17.241 9.517 26.313 9.517 21.761 0 41.73-16.782 41.73-41.271l0.904-700.873c0.462-24.508-19.951-41.289-41.73-41.289z m-20.873 699.968L321.244 669.276c-10.889-8.612-24.498-13.148-38.107-13.148H120.73l0.913-268.108 159.226-0.442c14.973 0 29.034-5.458 40.375-14.974L514.04 206.121l-0.911 614.22zM696.409 308.633c-14.07-9.516-33.58-5.44-42.652 8.63-9.517 14.052-5.44 33.562 8.629 42.635 48.075 32.215 77.119 85.288 77.119 141.992 0 54.879-27.219 106.605-72.582 138.803-14.07 9.994-17.242 29.044-7.266 43.096 5.901 8.63 15.417 13.166 25.41 13.166 6.344 0 12.688-1.824 17.686-5.9 61.702-44 98.436-114.775 98.436-189.625-0.001-77.118-39.002-149.241-104.78-192.797z" p-id="19163"></path><path d="M827.503 195.684c-12.705-11.341-32.215-10.438-43.557 2.268-11.34 12.705-10.419 32.198 2.269 43.539 74.407 66.699 117.043 161.502 117.043 260.399 0 96.629-39.003 186.435-109.777 253.134-12.244 11.784-13.148 31.294-1.364 43.539 5.9 6.361 14.07 9.533 22.682 9.533 7.708 0 15.435-2.729 21.318-8.63C919.135 720.541 964.96 614.839 964.96 501.43c0.442-115.678-49.458-227.263-137.457-305.746z" p-id="19164"></path></svg></svg></a>'),0<a.length||0<n.length?'\n                    <div class="sm_msg ad '.concat("reply"==e.from?"sm_reply":"",'" data-time="').concat(e.time,'">\n                        <div class="msgtitle">\n                            <span class="name">').concat(this.settings.name,'</span>\n                            <span class="time">').concat($.formatDate(new Date(e.time),"yyyy-MM-dd hh:mm"),"</span>\n                            ").concat(d,"\n                        </div>\n                        ").concat(l,"\n                        ").concat(n.join(""),"\n                    </div>\n                "):""}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"getMsg",value:function(e,t,a){var n=this;if(!e||0==e.length||e.input&&0==e.input.length)return"";switch(t){case"text":case"title":return'<div class="cItem">'.concat(marked.parse(u.symbolToHtml(e)),"</div>");case"image":return'<div class="cItem"><img src="'.concat($.handleDataImg(e),'" alt="img" la="la" /></div>');case"button":var o=[];return e.forEach(function(e){o.push('<a href="javascript:;" data-url="'.concat(e.url,'" >').concat(e.name,"</a>"))}),'<div class="cItem msgbtn">'.concat(o.join(""),"</div>");case"questionTip":var i=[];return e.forEach(function(e,t){i.push('<div class="quea"><a href="javascript:;" data-url="'.concat(e.url,'">').concat(e.name,"</a></div>"))}),'<div class="cItem msgquestion">'.concat(i.join(""),"</div>");case"knowledge":return this.getKnowledge(e,t,a);case"card":return'<div class="cardInfo" data-url="'.concat(e.url,'">\n                        <div class="cardmark"><span>').concat(i18n.sms_card,'</span><img src="/npublic/commonjs/smartService/zs.png" alt="zs" la="la" /></div>\n                        <div class="cinfo">\n                            <div class="cardImg"><img src="').concat($.handleDataImg(e.headImg),'" alt="head" la="la" /></div>\n                            <div class="cardName">\n                                <p class="name">').concat(e.name,'</p>\n                                <p class="label">').concat(e.role,"</p>\n                            </div>\n                        </div>\n                    </div>");case"form":var c=[];e.input.forEach(function(e){var t,a="";1==e.fixed?!1===e.ishide||e.showName||e.note?a=n.getFixedFormItem(e):void 0===e.ishide&&(t=!e.noRequired,a=n.getFixedFormItem(e,t)):0!=e.fixed||e.ishide?null==e.fixed&&(a=n.getFixedFormItem(e,!0)):a=n.getFormItem(e),a&&c.push(a)});var s="",r="";return e.msgAuthFlag&&(s='<div class="formIt aggree">\n                            <input type="checkbox" name="as" id="as" />\n                            <label class="formItLabel" for="as">'.concat(e.msgAuth,"</label>\n                        </div>"),r='<svg t="1723621189390" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1223" width="200" height="200"><path d="M417.1264 947.4048L315.392 621.568l442.368-293.6832-476.928 233.8304L50.0736 311.552a45.568 45.568 0 0 1 30.7712-76.3904l841.6256-50.4832a45.568 45.568 0 0 1 40.7552 70.6048L498.688 958.9248a45.568 45.568 0 0 1-81.5104-11.52z" p-id="1224"></path></svg>'),'<div class="msgcon msgform" progressId="'.concat(e.progressId,'">\n                        ').concat(c.join(""),"\n                        ").concat(s,'\n                        <div class="formIt"><a href="javascript:;" class="p_sub">').concat(r).concat(i18n.sms_submit,"</a></div>\n                    </div>");case"thirdTool":var l="";switch(e.type){case 1:l='<a href="tencent://message/?uin='.concat(e.account,'" data-name="').concat(e.name,'" class="thirdToolMedia"><svg t="1766971256390" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="77662" width="200" height="200"><path d="M499.073251 971.1616c-6.8096-4.096-16.384-10.8544-23.9616-10.8544-5.9392 0-13.7216 5.7344-20.48 9.3696a71.0144 71.0144 0 0 1-20.48 5.12l3.1744-17.3568 25.2416-17.3568h47.5648l5.6832 34.4064a43.52 43.52 0 0 1-16.896-3.4304z m-193.9456 50.1248c-96.2048 4.5056-176.0256-28.16-178.2784-72.96s73.9328-84.736 170.1376-89.0368 176.0256 28.16 178.2784 72.96-73.9328 84.5312-170.1376 89.0368z m340.0704 0c-96.1536-4.5056-172.288-44.4416-170.0352-89.2416s81.92-77.4656 178.1248-72.96 172.288 44.4416 170.0352 89.2416-81.92 77.4656-178.1248 72.96z m0 0" fill="#F2B624" p-id="77663"></path><path d="M474.702051 961.6896c-198.2976 0-359.8848-131.072-359.8848-338.6368 0-203.7248 160.768-368.64 359.0656-368.64s359.0656 165.1712 359.0656 368.64c0 206.336-159.9488 338.6368-358.4 338.6368z m421.8368-162.2016c-25.088 51.6096-167.3728-145.92-98.6624-348.16 0 0 174.08 174.4896 98.6624 348.16z m-841.2672 0.0512c-78.1824-170.3424 92.7744-349.8496 92.7744-349.8496 70.0416 200.8064-67.6864 401.1008-92.7744 349.8496z m0 0" fill="#191919" p-id="77664"></path><path d="M198.631651 644.2496c0 164.9152 109.312 296.192 276.7872 296.192s275.6096-131.2768 275.6096-296.192c0-157.2864-119.3984-277.0432-276.224-277.0432s-276.1728 119.552-276.1728 277.0432z m0 0" fill="#FAFAFB" p-id="77665"></path><path d="M790.708451 390.8608c10.24 0 18.6368 4.0448 18.6368 9.0624s-7.0656 29.7472-17.3568 29.7472-19.9168-24.7808-19.9168-29.7472 8.3456-9.0624 18.6368-9.0624z m-632.064 1.3312c10.24 0 18.3296 4.5056 18.3296 10.24s-8.0896 30.72-18.176 30.72-18.432-24.9856-18.432-30.72 8.192-10.24 18.3296-10.24z m0 0" fill="#D32F19" p-id="77666"></path><path d="M801.562851 343.1424c-5.12 183.808-56.32 230.0928-327.68 230.0928s-327.68-44.032-327.68-227.9424C146.049251 144.5888 292.583651 0 473.268451 0s333.312 163.0208 328.2432 343.04z m0 0" fill="#191919" p-id="77667"></path><path d="M352.231651 777.0112c-26.5728 0.7168-88.6784-7.2192-104.704-24.9344-6.7584-7.424-8.0384-12.032-8.0384-29.0304a655.36 655.36 0 0 1 20.1728-165.8368c64.6656-72.8064 112.64 32.4608 112.64 32.4608v167.2192a19.7632 19.7632 0 0 1-20.0704 20.1216z m122.88-134.2464c-165.5808 0-323.328-82.4832-364.3392-144.9472 1.7408-3.84 21.4016-73.1648 29.4912-97.536 16.9472 35.84 112.64 144.1792 334.7968 144.1792s321.792-119.7568 333.7728-148.48c12.1856 35.84 26.6752 94.4128 28.4672 101.632-64.512 84.7872-216.064 144.9472-362.2912 144.9472z m0 0" fill="#D32F19" p-id="77668"></path><path d="M331.751651 252.5184c-1.8944-48.0768 24.1152-88.2176 58.0608-89.5488s62.976 35.84 64.8192 84.1728S430.465251 335.36 396.519651 337.0496 333.492451 300.544 331.751651 252.5184z m163.84-2.56c0-48.0768 27.5456-87.04 61.44-87.04s61.44 38.9632 61.44 87.04-27.5456 87.04-61.44 87.04-61.44-38.9632-61.44-87.04z m0 0" fill="#FFFFFF" p-id="77669"></path><path d="M622.311651 461.3632c-71.68 37.376-90.624 59.0336-148.48 59.0848-56.32 0-76.4928-21.7088-148.48-59.0848-112.9984-58.7264-62.5664-63.6416 9.4208-85.0944 42.6496-12.6976 101.3248-18.7392 139.1616-18.7392s96.4608 6.1952 139.1616 18.8928c71.936 21.4016 122.368 26.368 9.2672 85.0944z m0 0" fill="#EFB024" p-id="77670"></path><path d="M649.191651 408.7296s-22.272 31.4368-82.944 53.6576c-31.744 11.6224-45.056 39.1168-91.3408 39.1168s-59.392-27.3408-91.0848-39.1168c-59.6992-22.4768-82.7904-53.6576-82.7904-53.6576 13.4656 9.9328 67.072 49.6128 174.08 49.6128s160.8192-39.8848 174.08-49.6128z m0 0" fill="#8A3322" p-id="77671"></path><path d="M579.252451 275.6096a8.1408 8.1408 0 0 1-8.3968-7.8336v-1.792c0-20.48-8.2944-36.3008-18.944-36.3008s-18.944 15.9232-18.944 36.3008v1.792a8.448 8.448 0 0 1-16.7936 0v-1.792c0-30.72 14.7456-51.968 35.84-51.968s35.84 21.3504 35.84 51.968v1.792a8.1408 8.1408 0 0 1-8.6016 7.8336z m-145.1008-24.4736c1.792 22.6304-10.5472 42.7008-27.5456 44.9024s-32.2048-14.336-33.9968-36.9664 10.3424-42.7008 27.4944-44.9024 32.256 14.336 34.048 36.9664z m0 0" fill="#191919" p-id="77672"></path><path d="M423.911651 249.088c0 8.448-4.096 15.7184-9.7792 16.1792s-10.24-5.9904-10.6496-14.4896 4.1472-15.7184 9.7792-16.2304 10.24 6.0416 10.6496 14.5408z m0 0" fill="#FFFFFF" p-id="77673"></path></svg>').concat(e.account,"</a>");break;case 2:break;case 3:l='<a href="http://amos.alicdn.com/getcid.aw?v=2&uid='.concat(e.account,'&site=cntaobao&s=2&groupid=0&charset=utf-8" data-name="').concat(e.name,'"><svg t="1766971781975" class="icon" viewBox="0 0 1097 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="78267" width="200" height="200"><path d="M597.15072 121.12384c-86.82496-68.02432-246.528-120.17152-246.528-120.17152s39.92576 66.85184 47.36 141.97248c-179.63008 59.54048-308.74624 222.208-308.74624 413.84448 0 241.88416 205.8752 438.05184 459.77088 438.05184S1008.64 798.64832 1008.64 556.69248c0-226.45248-180.224-412.60032-411.42272-435.56352l-0.06656-0.00512z" fill="#33C9F2" p-id="78268"></path><path d="M580.75648 384.14848c-38.76352 9.87648-56.39168 22.08768-91.86816 29.25568 39.35232 22.16448 70.72768 98.37568 29.84448 171.008 37.15584 0 59.24352-1.82784 92.96384-1.82784 24.64768-39.49568 25.52832-152.86784-31.01184-198.43584h0.07168z m245.53984-28.38016c-38.62016 9.94816-56.24832 22.16448-91.79648 29.25568 39.424 22.08768 70.72768 98.37568 29.98784 171.008 37.08416 0 59.17184-1.82784 92.96384-1.82784 24.576-39.49568 25.45664-152.72448-31.1552-198.43584z" fill="" p-id="78269"></path><path d="M217.53856 594.7136c-10.368 19.59936-39.34208 16.91648-45.3888-4.41344-14.70976-51.84-27.25376-131.5584 1.93024-206.15168 63.09888-161.28 258.92864-222.0544 258.92864-222.0544s-22.59456-105.37984-51.90144-122.12736C476.19072 65.5872 548.50048 139.8272 548.50048 139.8272s93.30688 0.80384 186.79296 47.96928c21.62688 10.91072 15.56992 43.38176-8.48896 46.16704-165.91872 19.23072-391.0656 137.2928-509.26592 360.75008z" fill="#78DBF6" p-id="78270"></path><path d="M386.6368 39.96672s55.8848 70.90176 52.224 108.44672l-19.5072 7.7568s4.05504-57.40032-32.7168-116.20352zM401.92 164.1472s-312.32 90.88-261.12 404.48c6.4 35.84 15.62112 39.34208 15.62112 39.34208s-17.7152-163.93728 45.81888-267.18208 199.68-176.64 199.68-176.64z" fill="#FFFFFF" p-id="78271"></path></svg>').concat(e.account,"</a>");break;case 4:l='<a href="skype:'.concat(e.account,'?chat" data-name="').concat(e.name,'"><svg t="1766971736736" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="78116" width="200" height="200"><path d="M36.865067 421.013333c-0.32 1.749333-0.554667 3.52-0.853334 5.269334 0.896 1.621333 1.706667 3.264 2.624 4.864l-1.770666-10.133334zM986.881067 602.688c0.341333-1.792 0.554667-3.626667 0.874666-5.418667-0.896-1.621333-1.685333-3.285333-2.624-4.906666l1.728 10.325333zM592.043733 982.976c1.642667 0.96 3.306667 1.770667 4.906667 2.688 1.834667-0.32 3.626667-0.533333 5.418667-0.874667l-10.325334-1.813333z" fill="#444444" p-id="78117"></path><path d="M987.755733 597.269333c-0.32 1.792-0.533333 3.626667-0.896 5.418667l-1.728-10.304c0.938667 1.6 1.728 3.264 2.624 4.885333 5.290667-28.757333 8.064-58.218667 8.064-87.637333 0-65.28-12.8-128.618667-38.037333-188.224a481.28 481.28 0 0 0-103.637333-153.706667 481.664 481.664 0 0 0-341.866667-141.589333c-30.762667 0-61.568 2.88-91.562667 8.64-0.064 0-0.149333 0-0.213333 0.042667 1.664 0.874667 3.392 1.664 5.034667 2.602666l-10.176-1.6 5.12-1.002666A286.570667 286.570667 0 0 0 286.273067 1.237333a284.309333 284.309333 0 0 0-202.410667 83.84A284.437333 284.437333 0 0 0 0.001067 287.509333c0 48.64 12.501333 96.490667 36.010666 138.773334 0.298667-1.749333 0.533333-3.52 0.853334-5.269334l1.770666 10.133334c-0.917333-1.6-1.706667-3.242667-2.624-4.864a486.997333 486.997333 0 0 0-7.274666 83.349333c0 65.28 12.778667 128.597333 38.016 188.202667a481.216 481.216 0 0 0 103.594666 153.706666 481.002667 481.002667 0 0 0 153.728 103.594667 479.402667 479.402667 0 0 0 188.202667 38.037333c28.416 0 56.896-2.56 84.693333-7.509333-1.621333-0.917333-3.285333-1.728-4.928-2.688l10.325334 1.813333c-1.792 0.341333-3.584 0.554667-5.397334 0.874667a285.973333 285.973333 0 0 0 140.8 37.12 284.16 284.16 0 0 0 202.389334-83.84A284.224 284.224 0 0 0 1024.001067 736.533333c0-48.832-12.586667-96.832-36.245334-139.264z" fill="#00AEF3" p-id="78118"></path><path d="M514.219733 805.76c-171.797333 0-248.64-84.458667-248.64-147.754667 0-32.469333 23.957333-55.232 57.002667-55.232 73.514667 0 54.464 105.578667 191.637333 105.578667 70.186667 0 108.992-38.144 108.992-77.162667 0-23.466667-11.584-49.472-57.813333-60.864l-152.810667-38.144c-123.050667-30.848-145.365333-97.386667-145.365333-159.914666 0-129.834667 122.24-178.56 237.034667-178.56 105.749333 0 230.4 58.410667 230.4 136.32 0 33.365333-28.885333 52.778667-61.909334 52.778666-62.741333 0-51.2-86.826667-177.557333-86.826666-62.72 0-97.472 28.373333-97.472 69.034666 0 40.533333 49.536 53.504 92.544 63.296l113.109333 25.109334c123.861333 27.584 155.264 99.925333 155.264 168.042666 0 105.514667-80.96 184.298667-244.416 184.298667z" fill="#FFFFFF" p-id="78119"></path></svg>').concat(e.account,"</a>");break;case 5:l='<a href="https://api.whatsapp.com/send?phone='.concat(e.account,'&text=Hello" data-name="').concat(e.name,'"><svg t="1766971676789" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="77967" width="200" height="200"><path d="M511.88787529 62h0.225C760.250375 62 962.00037529 263.86250029 962.00037529 512s-201.78749971 450-449.8875 450c-91.50000029 0-176.4-27.26250029-247.5-74.32499971L91.62537471 942.94999971l56.06250029-167.21249942A446.69999971 446.69999971 0 0 1 62.00037529 512C62.00037529 263.86250029 263.787875 62 511.88787529 62zM383.150375 309.34999971c-8.58750029-20.51250029-15.11250029-21.30000029-28.125-21.825A250.94999971 250.94999971 0 0 0 340.175375 287c-16.94999971 0-34.65 4.95-45.37500029 15.8625C281.86287471 316.09999971 249.500375 347.00000029 249.500375 410.48749971c0 63.41249971 46.38750029 124.7625 52.61249971 133.35000029 6.525 8.55 90.45 140.625 220.68750058 194.43750029 101.88749971 42.11250029 132.11250029 38.21249971 155.32499971 33.26249971 33.8625-7.27499971 76.31250029-32.24999971 87.00000029-62.36250029 10.6875-30.18750029 10.6875-55.9125 7.57499942-61.38749971-3.15-5.43750029-11.73750029-8.55-24.75-15.075-13.05-6.48749971-76.34999971-37.6875-88.34999942-41.85-11.73750029-4.3875-22.91249971-2.85000029-31.76250029 9.63749971-12.52500029 17.39999971-24.75 35.1-34.68750029 45.75000058-7.80000029 8.325-20.5875 9.37500029-31.23749971 4.95-14.32500029-6.00000029-54.45-20.025-103.98750029-63.97500058-38.28750029-34.04999971-64.35-76.42500029-71.8875-89.13749942-7.57500029-13.01249971-0.7875-20.54999971 5.21250029-27.5625 6.48749971-8.06249971 12.75000029-13.76250029 19.27500029-21.30000029 6.525-7.5375 10.125-11.43749971 14.32499942-20.28750029 4.42500029-8.58750029 1.31249971-17.4375-1.83749942-23.92499971-3.11249971-6.48749971-29.17500029-69.93749971-39.86250029-95.625z" fill="#25D366" p-id="77968"></path></svg>').concat(e.account,"</a>");break;case 6:l='<span data-name="'.concat(e.name,'"><svg t="1767598764099" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18714" width="200" height="200"><path d="M670.48 368.94c10.19 0 20.38 0.94 30.52 1.83-27.27-126.56-164.08-221.12-319.93-221.12C206.8 150.26 64 268.04 64 417.61c0 86.22 47.6 157.34 126.67 212.4l-31.92 94.45 110.99-55c39.76 7.78 71.68 15.56 110.94 15.56 10.19 0 19.88-0.44 29.57-1.34a240.59 240.59 0 0 1-9.69-66.11C401.01 480.45 519.84 369 670.54 369l-0.06-0.06zM499.9 283.71c24.08 0 39.76 15.56 39.76 39.44 0 23.34-15.68 39.45-39.76 39.45-23.58 0-47.6-15.61-47.6-39.45 0-23.88 24.03-39.44 47.6-39.44zM277.97 362.6c-23.52 0-47.6-15.61-47.6-39.45 0-23.89 24.08-39.44 47.6-39.44 23.58 0 39.76 15.56 39.76 39.44 0.01 23.34-15.67 39.45-39.76 39.45zM960 614.28c0-125.67-126.67-228.4-269.59-228.4-150.69 0-269.53 102.73-269.53 228.4 0 126.12 118.83 228.46 269.53 228.46 31.47 0 63.39-7.78 95.26-15.61l86.91 47.22-24.02-78.45C912.4 747.79 960 684.9 960 614.28z m-356.95-39.45c-15.68 0-31.92-15.56-31.92-31.67 0-15.56 16.24-31.67 31.92-31.67 24.08 0 39.76 15.61 39.76 31.67 0.01 16.12-15.68 31.67-39.76 31.67z m174.33 0c-15.74 0-31.47-15.56-31.47-31.67 0-15.56 15.68-31.67 31.47-31.67 24.02 0 39.76 15.61 39.76 31.67 0 16.12-15.73 31.67-39.76 31.67z" fill="#09BB07" p-id="18715"></path></svg>').concat(e.account,'</span>\n                            <img src="').concat(__ce.imgStaticUrl[0]+"/"+e.imageUrlArr[0].detail.watermarkUrl_symbol,'" />');break;case 7:l='<span data-name="'.concat(e.name,'"><svg t="1767599127009" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18864" width="200" height="200"><path d="M870.4512 204.8c26.2144 0 47.9232 19.8144 50.8416 45.2608l0.3584 5.9392v563.2c0 26.2144-19.8144 47.872-45.2096 50.8416L870.4 870.4h-128a12.8512 12.8512 0 0 1-12.4416-9.8816l-0.3584-2.9184v-9.5744a3.2256 3.2256 0 0 0-1.5872-2.7648l-1.6384-0.4608h-121.6a3.2256 3.2256 0 0 0-2.7648 1.5872l-0.4096 1.6384v9.5744a12.8 12.8 0 0 1-9.8816 12.4416L588.8 870.4H434.432a12.8512 12.8512 0 0 1-12.4928-9.8816l-0.3072-2.9184v-9.5744a3.2256 3.2256 0 0 0-1.5872-2.7648l-1.6384-0.4608h-120.832a3.2256 3.2256 0 0 0-2.7136 1.5872l-0.4608 1.6384v9.5744a12.8 12.8 0 0 1-9.8816 12.4416L281.6 870.4H153.6c-26.2144 0-47.872-19.8144-50.8416-45.2096L102.4 819.2V256c0-26.2144 19.8144-47.872 45.2608-50.8416L153.6 204.8h716.8512z m-12.8 51.2h-691.2a12.8512 12.8512 0 0 0-12.4928 9.8816L153.6 268.8v537.6c0 6.0416 4.2496 11.1104 9.8816 12.4416L166.4 819.2h73.6256a3.2256 3.2256 0 0 0 2.7648-1.5872l0.4096-1.5872v-9.6256a12.8 12.8 0 0 1 9.8816-12.4416L256 793.6h204.8a12.8 12.8 0 0 1 12.4928 9.8816l0.3584 2.9184v9.6256c0 1.1264 0.6144 2.2016 1.536 2.7136l1.6384 0.4608h70.4a3.2256 3.2256 0 0 0 2.7648-1.5872l0.4608-1.5872v-9.6256a12.8 12.8 0 0 1 9.8816-12.4416L563.2 793.6h204.8a12.8 12.8 0 0 1 12.4416 9.8816l0.3584 2.9184v9.6256c0 1.1264 0.6144 2.2016 1.5872 2.7136l1.6384 0.4608h73.5744a12.8512 12.8512 0 0 0 12.4416-9.8816l0.3584-2.9184V268.8a12.8 12.8 0 0 0-12.8-12.8zM343.3984 320a128.4096 128.4096 0 0 1 129.5872 125.952 127.744 127.744 0 0 1-42.9568 97.7408 6.4512 6.4512 0 0 0 0.4096 9.984 140.6976 140.6976 0 0 1 55.4496 112.0256 25.6 25.6 0 0 1-20.992 25.1904l-4.608 0.4096h-230.4a25.6 25.6 0 0 1-25.6-25.6c0-45.7216 21.7088-86.272 55.3984-112.0256a6.4512 6.4512 0 0 0 0.4096-9.9328 128 128 0 0 1 83.3024-223.744z m469.4528 281.6c3.5328 0 6.4 2.8672 6.4 6.4v38.4a6.4 6.4 0 0 1-6.4 6.4h-243.2a6.4 6.4 0 0 1-6.4-6.4v-38.4c0-3.5328 2.8672-6.4 6.4-6.4h243.2z m-467.968-25.6c-23.9104 0-46.3872 9.2672-63.3344 26.2656-8.3968 8.3968-14.8992 18.2272-19.3536 28.8768a6.4 6.4 0 0 0 3.7376 8.4992l2.1504 0.3584h153.6c4.6592 0 7.68-4.608 5.9392-8.8576a88.9856 88.9856 0 0 0-19.3536-28.8768 88.9856 88.9856 0 0 0-63.3856-26.2656z m467.968-76.8c3.5328 0 6.4 2.8672 6.4 6.4v38.4a6.4 6.4 0 0 1-6.4 6.4h-243.2a6.4 6.4 0 0 1-6.4-6.4v-38.4c0-3.5328 2.8672-6.4 6.4-6.4h243.2z m-467.8656-128c-42.3424 0-76.8 34.4576-76.8 76.8s34.4576 76.8 76.8 76.8c42.2912 0 76.8-34.4576 76.8-76.8s-34.5088-76.8-76.8-76.8z m467.8656 25.6c3.5328 0 6.4 2.8672 6.4 6.4v38.4a6.4 6.4 0 0 1-6.4 6.4h-243.2A6.4 6.4 0 0 1 563.2 441.6v-38.4c0-3.5328 2.8672-6.4 6.4-6.4h243.2z" p-id="18865" fill="#09BB07"></path></svg>').concat(e.account,'</span><img src="').concat(__ce.imgStaticUrl[0]+"/"+e.imageUrlArr[0].detail.watermarkUrl_symbol,'" />');break;case 8:l='<a href="mailto:'.concat(e.account,' data-name="').concat(e.name,'"><svg t="1766971919508" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="88756" width="200" height="200"><path d="M512 0C229.224296 0 0 229.224296 0 512c0 282.775704 229.224296 512 512 512 282.775704 0 512-229.224296 512-512C1024 229.224296 794.775704 0 512 0zM798.72 311.296l-285.847704 298.287407-288.559407-298.287407L798.72 311.296zM204.8 354.702222l159.706074 162.721185L204.8 677.072593 204.8 354.702222zM224.881778 720.896l169.870222-176.82963 117.475556 119.694222 115.730963-119.694222 171.595852 176.82963L224.881778 720.896zM819.2 677.072593l-164.067556-160.085333 164.067556-164.67437L819.2 677.072593z" fill="#FFB600" p-id="88757"></path></svg>').concat(e.account,"</a>");break;case 9:l='<a href="tel:'.concat(e.account,'" data-name="').concat(e.name,'"><svg t="1766971966478" class="icon" viewBox="0 0 1029 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="90728" width="200" height="200"><path d="M512.024292 0A512 512 0 1 1 0.024292 512 512 512 0 0 1 512.024292 0z m-108.783323 205.251553a104.98617 104.98617 0 0 0-77.27721 25.04069l-9.23632 5.747043-8.312688 5.233915c-63.730607 39.921427-36.842654 202.070154 67.117258 354.05893s247.635999 239.939066 310.442974 201.043896c4.002405-2.463019 19.498898-11.391461 21.346162-12.520344a106.012427 106.012427 0 0 0 49.978753-48.028864 82.100621 82.100621 0 0 0-24.835438-85.692524c-44.334336-51.312888-77.790339-63.935859-115.65925-46.592102a149.012628 149.012628 0 0 0-17.343756 9.338946l-16.728002 10.262577c-12.725596 7.799559-51.312888-29.453598-98.212868-97.391862s-65.783123-115.65925-54.18641-123.150932c1.128884-0.821006 13.341351-8.107436 16.728001-10.262578 47.61836-29.966727 55.828423-63.012227 18.780517-132.592503a92.363199 92.363199 0 0 0-62.601723-55.110042z" fill="#FF5E34" p-id="90729"></path></svg>').concat(e.account,"</a>");break;case 10:l='<a href="tel:'.concat(e.account,'" data-name="').concat(e.name,'"><svg t="1766972007995" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="93464" width="200" height="200"><path d="M512 1024C229.228 1024 0 794.772 0 512S229.228 0 512 0s512 229.228 512 512-229.228 512-512 512z m54.545-565.02l-1.798-1.764a102.207 102.207 0 0 0-11.002-9.523l-35.453 35.442c4.176 2.446 8.078 5.393 11.605 8.92l1.866 1.763a58.277 58.277 0 0 1 0 82.341l-96.904 96.882a58.334 58.334 0 0 1-82.341 0l-1.832-1.798a58.243 58.243 0 0 1 0-82.306l43.816-43.828a149.675 149.675 0 0 1-10.866-58.732l-67.812 67.72c-41.836 41.825-41.836 110.251 0 152.053l1.787 1.798c41.836 41.79 110.228 41.79 152.052 0l96.882-96.916c41.757-41.825 41.757-110.25 0-152.052z m141.38-141.37l-1.82-1.797c-41.802-41.825-110.228-41.825-152.053 0l-96.882 96.916c-41.824 41.79-41.824 110.216 0 152.053l1.798 1.763c3.505 3.425 7.225 6.576 11.002 9.523l35.454-35.476a57.845 57.845 0 0 1-11.583-8.92l-1.798-1.763a58.311 58.311 0 0 1 0-82.375l96.905-96.882a58.197 58.197 0 0 1 82.284 0l1.798 1.797a58.277 58.277 0 0 1 0 82.341l-43.76 43.828c7.612 18.796 11.196 38.81 10.844 58.766l67.789-67.755c41.824-41.79 41.824-110.216 0.022-152.007z" p-id="93465" fill="#f8aeae"></path></svg>').concat(e.account,"</a>");break;case 11:l='<a href="tel:'.concat(e.account,'" data-name="').concat(e.name,'"><svg t="1766972117295" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="96446" width="200" height="200"><path d="M682.507372 400.939555c-6.304589-23.760147-14.045901-46.267766-22.691815-67.686588-80.645738 17.824971-106.931405-52.202942-73.087599-101.162004-12.589736-18.912745-30.946826-32.406061-56.166207-39.059598-33.843806 51.834552-126.175701 25.733081-117.8992-45.014216-26.466792 0-52.922327 0-79.023798 0 6.65763 75.797313-84.609003 91.816149-123.481336 45.014216-19.10001 12.589736-45.201481 17.990746-50.768267 44.811602 37.069267 44.460608 3.225461 113.954355-73.087599 95.411023-8.276501 21.419845-16.387225 43.926442-22.319331 67.686588 63.905472 10.082636 63.905472 108.000759 0 118.083395 5.933129 23.575952 14.042831 46.083571 22.319331 67.502393 80.645738-17.824971 107.650789 52.202942 73.087599 101.180424 12.773931 19.078521 30.949896 32.756031 56.516178 39.226397 33.843806-51.834552 126.009925-25.733081 117.733425 45.198411 26.101471 0 52.555983 0 79.023798 0-6.838755-76.148307 84.609003-92.000344 123.668601-45.198411 19.081591-12.589736 45.364187-18.359137 50.396807-44.995797-36.719296-44.645826-2.87549-113.77016 73.087599-95.411023 8.644891-21.419845 16.387225-43.926442 22.691815-67.502393C615.889115 502.635725 615.889115 417.142585 682.507372 400.939555zM373.23354 577.161069c-64.792679 0-117.177769-52.552913-117.177769-117.179816 0-64.811098 52.384068-117.179816 117.177769-117.179816 64.442708 0 117.198236 52.368718 117.198236 117.179816C490.432799 524.608156 437.676248 577.161069 373.23354 577.161069z" fill="#2B629D" p-id="96447"></path><path d="M960.610274 695.982268c-2.157129-12.958126-4.497431-25.38311-7.90811-37.087687-43.739177 4.313236-53.824883-34.562167-32.220842-58.138118-6.119371-10.986215-14.765285-19.262716-27.723412-24.313755-20.884656 25.216311-68.771293 6.119371-59.594283-31.134091-13.861706-1.806135-27.723412-3.243881-41.936111-4.866844-0.719384 40.331567-50.231031 43.392276-67.871807 15.85306-11.336186 5.750981-25.197892 7.188726-29.693276 20.866237 16.734126 25.935696-5.40408 60.497862-44.833091 46.083571-5.750981 10.80202-11.336186 22.156626-16.018835 34.212196 33.124422 9.364275 27.005051 61.567217-7.188726 62.820768 1.787716 13.143345 4.313236 25.197892 7.557116 36.903491 43.926442-4.313236 53.640688 34.562167 32.756031 58.323337 5.40101 10.80202 14.045901 19.078521 26.820855 24.12956 21.419845-25.197892 68.590168-5.7694 59.761082 31.668257 14.230096 1.27197 28.27702 2.89391 41.769312 4.681626 1.25355-40.682561 50.765197-43.558052 68.409043-16.553001 10.983145-5.585205 25.010627-6.65456 29.693276-20.516266-16.553001-25.935696 5.40101-60.497862 44.645826-46.267766 5.585205-10.80202 11.17041-22.138206 16.018835-34.028001C919.042553 745.659691 924.078243 700.479699 960.610274 695.982268zM785.644357 770.139222c-34.381042-3.963265-58.676377-35.097356-54.897308-69.475328 4.497431-34.028001 34.912138-58.691727 69.291133-54.544267 34.212196 3.963265 59.225893 34.727942 54.547337 69.291133C851.17177 749.622956 820.019259 774.102487 785.644357 770.139222z" fill="#2B629D" p-id="96448"></path></svg>').concat(e.account,"</a>");break;case 12:l='<a href="tel:'.concat(e.account,'" data-name="').concat(e.name,'"><svg t="1766972055705" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="94508" width="200" height="200"><path d="M516.426808 807.930831c5.168874 0 10.440102-0.307062 15.71133-0.870008 50.716378-5.885352 93.807387-40.173922 109.672247-87.410266a7.164776 7.164776 0 0 0-4.04298-8.853616 7.676546 7.676546 0 0 0-9.570094 2.968265c-0.204708 0.255885-20.368434 31.729722-98.771553 41.965115-11.770703 1.535309-23.183168 2.354141-34.032685 2.354141-54.964066 0-79.477835-20.061372-79.682543-20.26608a7.727723 7.727723 0 0 0-9.825978-0.102354 7.164776 7.164776 0 0 0-1.535309 9.416562 133.827778 133.827778 0 0 0 112.077565 60.798241z m421.851767-470.009296c-0.716478 0-1.330601 0.153531-1.995902 0.153531-45.956919-192.425409-221.596282-335.925633-432.189515-335.925633-216.376231 0-396.109751 151.483832-435.925433 351.790494C29.477935 360.695287 0 393.602079 0 433.366585v159.262732c0 44.626318 37.00095 80.808436 82.753161 80.808436 25.793193 0 48.515768-11.770703 63.664151-29.836174 36.591534 93.551502 111.054026 168.935179 205.322005 208.750862a42.988655 42.988655 0 0 1 4.196512-6.499475c1.484132-1.842371 3.121795-3.37768 4.55475-3.37768a7.164776 7.164776 0 0 1 3.991804 1.279424c-21.801389-15.660153-100.613924-96.366235-117.707032-209.006747-7.471838-49.590484 30.962067-98.259783 75.690739-106.294567 71.801289-12.896597 143.24434-27.635564 215.04563-40.327453 45.649858-8.034784 76.867809-32.241491 95.956819-72.568944 4.452396-9.416563 10.900695-28.454396 13.868959-55.936428a8.802439 8.802439 0 0 1 8.700085-7.215953c2.968264 0 5.475936 1.432955 7.164776 3.582388l1.944725-1.228247c28.300865 39.764506 84.442001 127.686541 92.527962 220.470388 9.211855 106.038683 4.094158 178.607627-79.887251 252.916587a6.499475 6.499475 0 0 0-2.200609 4.861813c0 2.302964 1.228247 4.247689 3.070618 5.424758l2.047079 0.921186c0.614124 0.153531 1.125893 0.307062 1.68884 0.307062 0.614124 0 1.074716-0.153531 1.586486-0.307062l3.480034-1.893548c84.953771-45.240442 150.050877-120.77765 180.142936-211.565595 12.231296 17.502524 31.269129 30.092059 53.428757 34.493278-35.516817 156.243291-179.73352 254.093658-358.341147 268.934979a73.183068 73.183068 0 0 0-68.06537-43.909841c-40.37863 0-73.183068 30.91089-73.183068 69.08891 0 38.126843 32.804438 69.037733 73.183068 69.037733 32.650907 0 59.928232-20.214903 69.395971-48.055175 206.75496-16.2231 372.568344-135.056025 407.163977-319.651357 30.552651-12.384827 52.046979-41.350992 52.046978-75.230146V419.548803c0-45.035734-38.024489-81.576091-84.95377-81.576091z m-76.253686 46.315158c-53.940527-141.248438-193.704833-242.118247-358.136439-242.118246-163.715128 0-302.967665 100.050977-357.419961 240.327053-2.661202-3.172972-5.885352-5.936529-8.95597-8.700085 30.808536-170.982258 183.008846-300.971763 366.580639-300.971763 182.701784 0 334.390324 128.71008 366.2224 298.515268-3.121795 4.094158-6.038883 8.341846-8.341846 12.947773z m-510.183218 468.115748c-0.153531 0.255885-0.153531 0.307062 0 0z" fill="#ffafaf" p-id="94509"></path></svg>').concat(e.account,"</a>")}return'<div class="thirdTool">\n                        <div class="linksBtn">\n                            <div>'.concat(i18n.transfered||"目前人工坐席繁忙，您也可以按以下方式直接联系。","</div>\n                            ").concat(l,"\n                        </div>\n                    </div>");case"workOrder":var d=[];e.input.forEach(function(e,t){0==t&&(e.fixed=0);var a="";1==e.fixed?!1===e.ishide||e.showName||e.note?a=n.getFixedFormItem(e):void 0===e.ishide&&(t=!e.noRequired,a=n.getFixedFormItem(e,t)):0!=e.fixed||e.ishide?null==e.fixed&&(a=n.getFixedFormItem(e,0!=e.required)):a=n.getFormItem(e),a&&d.push(a)});var g="",m="";return e.msgAuthFlag&&(g='<div class="formIt aggree">\n                            <input type="checkbox" name="as" id="as" />\n                            <label class="formItLabel" for="as">'.concat(e.msgAuth,"</label>\n                        </div>"),m='<svg t="1723621189390" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1223" width="200" height="200"><path d="M417.1264 947.4048L315.392 621.568l442.368-293.6832-476.928 233.8304L50.0736 311.552a45.568 45.568 0 0 1 30.7712-76.3904l841.6256-50.4832a45.568 45.568 0 0 1 40.7552 70.6048L498.688 958.9248a45.568 45.568 0 0 1-81.5104-11.52z" p-id="1224"></path></svg>'),'\n                        <div class="msgcon msgform workOrderMsgformBox" progressId="'.concat(e.progressId,'">\n                            ').concat(d.join(""),"\n                            ").concat(g,'\n                            <div class="formIt workOrderMsgform"><a href="javascript:;" class="p_sub2">').concat(m).concat(i18n.sms_submit,"</a></div>\n                        </div>\n                    ");case"aiAgent":var p,w,h=e.msg,s=e.source,r=e.relatedIssues,g="",m="";return Array.isArray(s)&&0<s.length?(p=[],s.forEach(function(e){if("object"===_typeof(e)&&null!==e)for(var t in e)e.hasOwnProperty(t)&&e[t]&&p.push('<div class="sourceItem"><a href="'.concat(t,'" target="_blank">').concat(e[t],"</a></div>"))}),0<p.length&&(g='<div class="aiAgent_source">'.concat(p.join(""),"</div>"))):"string"==typeof s&&(g='<div class="aiAgent_source"><a href="'.concat(s,'" target="_blank">').concat(s,"</a></div>")),Array.isArray(r)&&0<r.length?(w=[],r.forEach(function(e){w.push('<li class="relatedIssuesItem"><svg t="1767492010358" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19529" width="200" height="200"><path d="M995.765248 550.5024a679.8336 679.8336 0 0 0-445.2352 445.2352 40.3456 40.3456 0 0 1-76.9024 0A679.7312 679.7312 0 0 0 28.392448 550.5024a40.3456 40.3456 0 0 1 0-77.0048A679.7312 679.7312 0 0 0 473.627648 28.2624a40.3456 40.3456 0 0 1 76.9024 0 679.8336 679.8336 0 0 0 445.2352 445.2352 40.3456 40.3456 0 0 1 0 77.0048z" fill="#9812FA" p-id="19530"></path></svg><p class="related_text">'.concat(e,"<p></li>"))}),0<w.length&&(m='<div><ul class="aiAgent_relatedIssues hidden"><div class="related_title">'.concat(i18n.relatedQuestions||"相关问题",":</div>").concat(w.join(""),"</ul></div>"))):"string"==typeof r&&(m='<div><div class="related_title">'.concat(i18n.related||"相关问题",':</div><div class="aiAgent_relatedIssues hidden">').concat(r,"</div></div>")),'\n                        <div class="aiAgent">\n                            <div class="aiAgent_msg">'.concat(marked.parse(h),"</div>\n                            ").concat(g,"\n                            ").concat(m,"\n                        </div>\n                    ");case"internationalEntry":return'<div class="internationalEntry">'.concat("正在为您转接中..."==e?i18n.transfering||e||"正在为您转接中...":i18n.humanAgents||e||"目前人工坐席繁忙，请留下您的联系方式，我们将第一时间联系您。","</div>");default:return""}}},{key:"showLastRelatedIssues",value:function(){$(".aiAgent_relatedIssues").addClass("hidden");var e=$(".sm_msg.ad").last();0<e.length&&(0<(e=e.find(".aiAgent_relatedIssues")).length&&e.removeClass("hidden").show())}},{key:"getFixedFormItem",value:function(e,t){var a={mobile:i18n.sms_mobil,email:i18n.sms_email,nickname:i18n.sms_nickname,name:i18n.sms_name,address:i18n.sms_address},n=e.showName||a[e.code]||e.name,a='<input class="p_inp" placeholder="'.concat(t||void 0===e.ishide?"":e.tooltip,'" data-type="').concat(e.dataType,'" type="text" name="').concat(e.code,'" /><div class="errorMsg"></div>');return"address"==e.code?a='<textarea class="p_inp" placeholder="'.concat(t||void 0===e.ishide?"":e.tooltip,'" data-type="').concat(e.dataType,'" name="').concat(e.code,'"></textarea><div class="errorMsg"></div>'):"mobile"!=e.code&&"custLinkMobile"!=e.code||(a=this.mobileItem(e,t)),'<div class="formIt" '.concat(e.switchFlag||t?"required":"",'>\n                <label class="formItLabel">').concat(n,"</label>\n                ").concat(a,"\n            </div>")}},{key:"mobileItem",value:function(e,t){var a,n=this.arraySort(c.countries,"iso2"),o=n.find(function(e){return"CN"==e.iso2})||{},i=[];return i.push('\n                <li class="p_codeItem p_active">\n                    <span class="p_enDial">+86</span>\n                    <span class="p_enCode">CN</span>\n                </li>\n            '),n.forEach(function(e){var t="CN"==e.iso2?"p_active":"";i.push('<li class="p_codeItem '.concat(t,'"><span class="p_enDial">').concat(e.dialCode,'</span><span class="p_enCode">').concat(e.iso2,"</span></li>"))}),a='<div class="input-group-prepend p_mobilePre">\n                <div class="p_phoneCode">\n                    <div class="form-control p_currentCode">\n                        <span>'.concat(o.dialCode,'</span>\n                        <span class="p_arrow">\n                        <svg t="1655693452891" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4805" width="200" height="200"><path d="M297.69350383 346.29910124L512 560.6055974 726.30649617 346.29910124a55.0126984 55.0126984 0 1 1 77.87942242 77.87942241L550.66354348 677.70089876a55.0126984 55.0126984 0 0 1-77.87942242 0L219.26174595 424.17852365c-10.49439069-10.49439069-16.01775312-24.30279805-16.01775442-38.66354347s6.07569919-28.72148955 16.01775442-39.21587894c21.54111683-20.98878007 56.89064234-21.54111683 78.43175788 0z" p-id="4806"></path></svg>\n                        </span>\n                    </div>\n                    <ul class="p_codeList">\n                        ').concat(i.join(""),'\n                    </ul>\n                    <input type="hidden" name="mobilePrefix" class="p_inp" value="').concat(o.dialCode,",").concat(o.iso2,'" />\n                </div>\n            </div>'),'<div class="input-group p_mobilegroup">\n                '.concat(a,'\n                <input class="p_inp" placeholder="').concat(t||void 0===e.ishide?"":e.tooltip,'" data-type="').concat(e.dataType,'" type="text" name="').concat(e.code,'" >\n                <div class="errorMsg"></div>\n            </div>')}},{key:"getFormItem",value:function(a){var t="";if("txt"==a.dataType)switch(a.dataSubType){case"text":case"email":t='<input class="p_inp" placeholder="'.concat(a.tooltip,'" data-type="').concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" type="text" name="').concat(a.code,'" /><div class="errorMsg"></div>');break;case"numberic":t='<input class="p_inp" placeholder="'.concat(a.tooltip,'" data-type="').concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" type="number" name="').concat(a.code,'" /><div class="errorMsg"></div>');break;case"mobile":case"phone":t=this.mobileItem(e);break;case"simpleDate":case"allDate":t='<div class="j_date"><input class="p_inp" placeholder="'.concat(a.tooltip,'" data-type="').concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" type="text" name="').concat(a.code,'" /></div><div class="errorMsg"></div>')}else if("multiTxt"==a.dataType)t='<textarea class="p_inp" placeholder="'.concat(a.tooltip,'" data-type="').concat(a.dataType,'" name="').concat(a.code,'"></textarea><div class="errorMsg"></div>');else if("select"==a.dataType){var n=[];switch(a.dataSubType){case"redio":a.dataItem.forEach(function(e,t){n.push('<div class="p_radioItem">\n                                <input type="radio" data-type="'.concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" name="').concat(a.code,'" id="').concat(e.key||e.value,'" value="').concat(e.value,'">\n                                <label for="').concat(e.key||e.value,'">').concat(e.showValue||e.name,"</label>\n                            </div>"))}),t='<div class="p_inp p_radio" name="'.concat(a.code,'">').concat(n.join(""),'</div><div class="errorMsg"></div>');break;case"checkbox":a.dataItem.forEach(function(e,t){n.push('<div class="p_radioItem">\n                            <input data-type="'.concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" type="checkbox" name="').concat(a.code,'" id="').concat(e.key,'" value="').concat(e.value,'">\n                            <label for="').concat(e.key,'">').concat(e.showValue,"</label>\n                        </div>"))}),t='<div class="p_inp p_checkbox" name="'.concat(a.code,'">').concat(n.join(""),'</div><div class="errorMsg"></div>');break;case"selSigle":t='<div class="p_select selSigle">\n                            <div class="multSelect p_input"></div>\n                            <div class="invalid-feedback"></div>\n                            <input type="hidden" name="dataItem" placeholder="'.concat(a.tooltip,"\" value='").concat(JSON.stringify(a.dataItem),'\'>\n                            <input class="p_inp" type="hidden" data-type="').concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" name="').concat(a.code,'">\n                        </div>');break;case"selMulti":t='<div class="p_select selMulti">\n                            <div class="multSelect p_input"></div>\n                            <div class="invalid-feedback"></div>\n                            <input type="hidden" name="dataItem" placeholder="'.concat(a.tooltip,"\" value='").concat(JSON.stringify(a.dataItem),'\'>\n                            <input class="p_inp" type="hidden" data-type="').concat(a.dataType,'" sub-type="').concat(a.dataSubType,'" name="').concat(a.code,'">\n                        </div>')}}return'<div class="formIt" '.concat(a.switchFlag||0<a.required?"required":"",'>\n                <label class="formItLabel">').concat(a.showName||a.name,"</label>\n                ").concat(t,"\n            </div>")}},{key:"getKnowledge",value:function(e,t,a){var n,o,i="",c="",s="";return e.aiReplySurvey&&a&&(s='<div class="reply">\n                    <a href="javascript:;" class="replyBtn replyY" progressId="'.concat(e.progressId,'" data-id="1" msg="').concat(encodeURIComponent(e.msg),'"><svg t="1727148138116" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="957" width="200" height="200"><path d="M881.504 356.352l-200.864 0.576c11.2-20.32 66.432-127.488 51.808-242.144-6.144-48.16-37.568-85.376-88.576-104.768-19.936-7.552-117.6-20.928-147.168 6.336-20.512 20.224-18.944 47.552-17.088 79.232 0.864 15.264 1.888 32.576 1.056 50.592-4.992 52.032-11.936 79.744-25.696 102.272-41.6 68.288-112 105.536-127.04 107.968H35.648c-19.68 0-35.648 15.36-35.648 34.336v447.552c0 18.976 15.968 34.336 35.648 34.336l299.776-0.192 0.896 0.736c26.592 21.248 97.28 77.664 214.24 77.664h234.752c65.28 0 117.984-34.496 137.504-90.016l0.64-1.984c2.4-8.576 9.152-27.872 16.96-50.24 31.296-89.6 83.68-239.552 83.68-321.088 0-84.576-50.624-131.168-142.592-131.168zM71.264 804h112.8V425.056H71.264v378.944z m801.6-17.28c-8.48 24.384-14.72 42.24-17.824 52.928-14.048 38.4-53.344 42.56-69.728 42.56h-234.752c-91.296 0-145.6-43.36-168.768-61.888-11.52-9.216-20.672-16.512-35.328-16.512H255.296V425.056h72.64c40.64 0 136.48-56.576 188.48-141.824 22.4-36.736 30.08-77.248 35.296-132.288a534.4 534.4 0 0 0-0.96-59.2c-0.448-7.616-0.96-16.384-0.96-22.976 20.416-1.184 57.28 1.216 67.968 5.12 27.04 10.272 40.992 25.92 43.968 49.28 12.256 96.192-38.176 191.008-43.968 201.504l-1.152 2.176a66.848 66.848 0 0 0 4.864 66.464 72.64 72.64 0 0 0 60.8 31.68h199.232c59.68 0 71.36 22.944 71.36 62.528 0 70.304-52.032 219.2-80 299.2z" p-id="958"></path></svg>').concat(i18n.sms_resolved,'</a><a href="javascript:;" class="replyBtn replyN" progressId="').concat(e.progressId,'" data-id="0" msg="').concat(encodeURIComponent(e.msg),'"><svg t="1727148138116" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="957" width="200" height="200"><path d="M881.504 356.352l-200.864 0.576c11.2-20.32 66.432-127.488 51.808-242.144-6.144-48.16-37.568-85.376-88.576-104.768-19.936-7.552-117.6-20.928-147.168 6.336-20.512 20.224-18.944 47.552-17.088 79.232 0.864 15.264 1.888 32.576 1.056 50.592-4.992 52.032-11.936 79.744-25.696 102.272-41.6 68.288-112 105.536-127.04 107.968H35.648c-19.68 0-35.648 15.36-35.648 34.336v447.552c0 18.976 15.968 34.336 35.648 34.336l299.776-0.192 0.896 0.736c26.592 21.248 97.28 77.664 214.24 77.664h234.752c65.28 0 117.984-34.496 137.504-90.016l0.64-1.984c2.4-8.576 9.152-27.872 16.96-50.24 31.296-89.6 83.68-239.552 83.68-321.088 0-84.576-50.624-131.168-142.592-131.168zM71.264 804h112.8V425.056H71.264v378.944z m801.6-17.28c-8.48 24.384-14.72 42.24-17.824 52.928-14.048 38.4-53.344 42.56-69.728 42.56h-234.752c-91.296 0-145.6-43.36-168.768-61.888-11.52-9.216-20.672-16.512-35.328-16.512H255.296V425.056h72.64c40.64 0 136.48-56.576 188.48-141.824 22.4-36.736 30.08-77.248 35.296-132.288a534.4 534.4 0 0 0-0.96-59.2c-0.448-7.616-0.96-16.384-0.96-22.976 20.416-1.184 57.28 1.216 67.968 5.12 27.04 10.272 40.992 25.92 43.968 49.28 12.256 96.192-38.176 191.008-43.968 201.504l-1.152 2.176a66.848 66.848 0 0 0 4.864 66.464 72.64 72.64 0 0 0 60.8 31.68h199.232c59.68 0 71.36 22.944 71.36 62.528 0 70.304-52.032 219.2-80 299.2z" p-id="958"></path></svg>').concat(i18n.sms_unresolved,"</a>\n                </div>")),"object"==_typeof(e.content)?i=this.isArray(e.content)?(n=[],e.content.forEach(function(e,t){t=Math.floor(t/3);n.push('<div class="knoa" group="'.concat(t,'"><a href="javascript:;" biz="').concat(e.bizId,'">').concat(e.title,"</a></div>"))}),3<e.content.length&&(c='<a href="javascript:;" cg="0" ag="'.concat(Math.ceil(e.content.length/3)-1,'"><svg t="1727143795984" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9434" width="200" height="200"><path d="M118.869333 503.096889c1.137778-49.948444 11.406222-98.417778 30.72-144.014222A392.277333 392.277333 0 0 1 233.841778 234.097778a391.111111 391.111111 0 0 1 278.044444-115.2c53.134222 0 104.561778 10.382222 152.917334 30.833778 46.734222 19.740444 89.144889 48.384 124.928 84.366222 11.292444 11.292444 21.902222 23.324444 31.772444 35.868444l-68.835556 53.731556a9.102222 9.102222 0 0 0 3.441778 16.099555l200.817778 49.152c5.688889 1.365333 11.292444-2.986667 11.292444-8.817777l0.910223-206.734223a9.102222 9.102222 0 0 0-14.734223-7.196444l-64.455111 50.403555c-87.893333-112.469333-224.568889-184.576-378.168889-184.576-261.831111 0-474.851556 209.834667-479.772444 470.641778a9.130667 9.130667 0 0 0 9.159111 9.358222h68.551111a9.102222 9.102222 0 0 0 9.159111-8.903111zM982.869333 512h-68.579555a9.102222 9.102222 0 0 0-9.159111 8.903111 390.4 390.4 0 0 1-30.72 144.014222 391.054222 391.054222 0 0 1-84.224 125.013334 391.367111 391.367111 0 0 1-278.072889 115.2 391.139556 391.139556 0 0 1-277.930667-115.2c-11.320889-11.292444-21.959111-23.324444-31.772444-35.868445l68.778666-53.731555a9.130667 9.130667 0 0 0-3.413333-16.099556l-200.817778-49.152a9.187556 9.187556 0 0 0-11.292444 8.817778l-0.796445 206.848c0 7.68 8.789333 12.003556 14.734223 7.196444l64.455111-50.403555c87.893333 112.355556 224.568889 184.462222 378.168889 184.462222 261.973333 0 474.851556-209.92 479.772444-470.641778a9.102222 9.102222 0 0 0-9.130667-9.358222z" p-id="9435"></path></svg>').concat(i18n.sms_change,"</a>")),'<p class="ktitle"><span>'.concat(i18n.sms_recommend,"：</span>").concat(c,'</p><div class="faq">').concat(n.join(""),"</div>")):(o=[],c="",e.content.source&&0<e.content.source.length&&(e.content.source.forEach(function(e){if("string"==typeof e)o.push('<li class="sourceItem"><a href="'.concat(e,'" target="_blank">').concat(e,"</a></li>"));else if("object"==_typeof(e))for(var t in e)e[t]&&t&&"null"!=t&&"null"!=e[t]&&o.push('<li class="sourceItem"><a href="'.concat(t,'" target="_blank">').concat(e[t],"</a></li>"))}),0<o.length&&(c='<div class="source">\n                                <p>'.concat(i18n.sms_resource,"：</p>\n                                <ul>").concat(o.join(""),"</ul>\n                            </div>"))),'<div class="markCon">'.concat(marked.parse(e.content.answer),"</div>").concat(c)):"string"==typeof e.content&&(i='<div class="markCon">'.concat(marked.parse(e.content),"</div>")),'<div class="msgcon msgknowledge">'.concat(i,"</div>").concat(s)}},{key:"customerHtml",value:function(e){return'\n            <div class="sm_msg cus" data-time="'.concat(e.time,'">\n                <div class="msgtitle">\n                    <span class="time">').concat($.formatDate(new Date(e.time),"yyyy-MM-dd hh:mm"),'</span>\n                </div>\n                <div class="msgcon">\n                    ').concat(this.escapeHtml(u.symbolToHtml(e.text)),"\n                </div>\n            </div>\n            ")}},{key:"escapeHtml",value:function(n){var e=n.match(new RegExp(/<[^>]+>/g));return e&&0<e.length&&(e=_toConsumableArray(new Set(e))).forEach(function(e){var t,a;/^<span/.test(e)||/span>$/.test(e)||/^<br/.test(e)||(t=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),-1<(a=e).indexOf("(")&&(a=e.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),n=n.replace(new RegExp(a,"g"),t))}),n}},{key:"getIcon",value:function(){var e="";1!=this.colorLayout.showFlag&&this.colorLayout.tipText&&(e='<span class="smtIconPrompt '.concat("left"==this.colorLayout.windowLocation?"leftPrompt":"",'">').concat(this.colorLayout.tipText,"</span>"),this.res.enableAgentFlag&&(e='<span class="smtIconPrompt_"></span>'));return this.res.aiAgentImg?'<a href="javascript:;" id="'.concat(this.iconId,'" smartService class="smartIcon aiAgentImg ').concat("left"==this.colorLayout.windowLocation?"leftIcon":"",'"><img src="').concat(this.res.aiAgentImg,'" class="aiAgentImg" /></a>'):'\n                    <a href="javascript:;" id="'.concat(this.iconId,'" smartService class="smartIcon ').concat("left"==this.colorLayout.windowLocation?"leftIcon":"",'">\n                        <svg t="1691993598192" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="814" width="200" height="200"><path d="M508.30872719 128.08273435c200.36824869 0 362.83837999 164.57253407 362.83837996 367.57335931 0 203.01910646-162.45184851 367.59164208-362.83837996 367.59164209v-55.13783256c170.33129377 0 308.41353791-139.89213981 308.41353633-312.43552832 0-172.57995248-138.08224413-312.45380951-308.41353633-312.45380952s-308.41353791 139.89213981-308.41353791 312.43552831c0 5.48453223 0.12797313 10.93250049 0.40219903 16.34390634H145.81770106c-0.23766351-5.41140585-0.36563506-10.8593741-0.36563663-16.34390634C145.45206443 292.65526841 307.94047692 128.08273435 508.32700838 128.08273435z" p-id="815"></path><path d="M508.30872719 240.40595711c139.16086813 0 251.95941786 114.27937278 251.95941629 255.25013655 0 140.98904501-112.79854975 255.26841777-251.95941629 255.26841777-36.65495788 0-71.46345612-7.91600767-102.87154529-22.1757924l-65.81438835 34.62568148c-9.89044049 5.19202354-22.06610207 1.27972351-27.18499926-8.72040577a20.65840542 20.65840542 0 0 1-2.01099519-12.76067896l12.10253519-73.76696156a256.18250777 256.18250777 0 0 1-66.18002497-172.47026056c0-140.97076381 112.79854975-255.25013657 251.95941787-255.25013655zM381.28695667 446.66093709c-24.4975775 0-44.33330364 20.10995203-44.33330366 44.91832098 0 24.80836739 19.85400733 44.91831942 44.33330366 44.91831943 24.4975775 0 44.35158484-20.10995203 44.35158486-44.91831943 0-24.80836739-19.85400733-44.91831942-44.35158486-44.91832098z m127.00348775 0c-24.4975775 0-44.35158484 20.10995203-44.35158488 44.91832098 0 24.80836739 19.85400733 44.91831942 44.35158488 44.91831943s44.33330364-20.10995203 44.33330363-44.91831943c0-24.80836739-19.85400733-44.91831942-44.33330363-44.91832098z m126.98520652 0c-24.4975775 0-44.35158484 20.10995203-44.35158484 44.91832098 0 24.80836739 19.85400733 44.91831942 44.35158484 44.91831943s44.35158484-20.10995203 44.35158484-44.91831943c0-24.80836739-19.85400733-44.91831942-44.35158484-44.91832098zM183.47815657 388.70771279l43.82141265 251.79488075a34.91819015 34.91819015 0 0 1-27.33125199 40.36615843l-0.65814374 0.10969033c-62.21287819 11.11531881-121.53723669-30.96932612-132.50630275-93.9866024L56.71233074 529.00205007c-10.96906446-63.03555904 30.5671271-123.12775168 92.79828807-134.24307046l33.96753776-6.06954959zM840.52513489 388.70771279L790.707299 674.89061152l33.98581895 6.06954959c62.21287819 11.11531881 121.53723669-30.96932612 132.50630273-93.98660398l10.09153845-57.97150706c10.96906446-63.03555904-30.5671271-123.12775168-92.7982881-134.24307046l-33.96753614-6.06954959zM464.96263993 808.10990319h86.6738933c23.94912413 0 43.32780605 19.65290783 43.32780446 43.89454063 0 24.25991557-19.37868034 43.91282183-43.32780446 43.91282183h-86.6556121c-23.94912413 0-43.36437003-19.65290783-43.36437003-43.91282183 0-24.2416328 19.41524431-43.89454063 43.34608883-43.89454063z" p-id="816"></path></svg>\n                    </a>').concat(e)}},{key:"getDialog",value:function(){var e=this.colorLayout,t=$.handleDataImg(this.kefuHead)||"/npublic/commonjs/smartService/kefu.png",a="smartService ".concat("right"==e.windowLocation?"rightWindow":"leftWindow"," ").concat(1==e.windowStyle?"bigWindow":"smallWindow"," ").concat(1!=e.entranceLocation?"near":""),n='<svg t="1691993635353" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="953" width="200" height="200"><path d="M512 512m-421.875 0a421.875 421.875 0 1 0 843.75 0 421.875 421.875 0 1 0-843.75 0Z" p-id="954"></path><path d="M322.37828973 688.38815811L358.3486846 528.43092136l255.34539404-15.98684272-255.34539404-17.31907864L322.42269702 335.63404636A22.20394702 22.20394702 0 0 1 353.99671026 310.89884851l362.52384934 181.25082285a22.20394702 22.20394702 0 0 1 0 39.70065728L353.97450662 713.12335513A22.20394702 22.20394702 0 0 1 322.37828973 688.38815811z" fill="#ffffff" p-id="955"></path></svg>';2==this.colorLayout.modelType&&(n=i18n.sms_send);var o=i18n.sms_title;1==this.settings.titleFlag&&(o=this.settings.title);var i=this.res.memberFlag,c="";this.res.quickLabel&&Array.isArray(this.res.quickLabel)&&(c=this.res.quickLabel.filter(function(e){return 1==e.status}).filter(function(e){return"AI搜索"==e.name?e.name=i18n.aiSearch:e.name}).map(function(e,t){return'<div class="quick_label_item" data-type="'.concat(e.type||"0",'" data-index="').concat(t,'">').concat(e.svg||"").concat(e.name,"</div>")}).join(""));e=c?'\n                <div class="quick_labels">\n                    '.concat(c,"\n                </div>\n            "):"",c=i?'\n                <div class="sm_tabs_nav">\n                    <a href="javascript:;" class="sm_tab_link active" data-tab="chat"><svg t="1766115077573" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1426" width="200" height="200"><path d="M505.6 48a464 464 0 1 1-214.72 875.456c7.104 3.712 2.752 4.096-5.504 6.464l-4.352 1.28c-11.648 3.584-24.576 8.384-52.16 19.2l-1.28 0.448c-34.88 13.632-51.52 19.648-69.824 24.448-36.224 9.408-62.976 9.472-86.144-12.416-36.544-34.56-31.744-63.04 0-164.352l0.512-1.536c14.848-47.36 20.288-73.6 20.864-72.448A464 464 0 0 1 505.6 48z m0 96a368 368 0 0 0-327.296 536.512c17.664 34.24 12.672 58.176-14.592 145.216l-0.512 1.536c-6.976 22.272-11.264 36.672-14.08 48l-0.64 2.56 4.928-1.6c7.808-2.688 17.216-6.208 29.44-10.944l9.856-3.84 1.28-0.448c89.216-34.88 107.776-40.192 141.376-22.656A368 368 0 1 0 505.6 144z" fill="" p-id="1427"></path></svg>'.concat(i18n.sms_title||"客服对话",'</a>\n                    <a href="javascript:;" class="sm_tab_link" data-tab="member"><svg t="1766115111667" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1571" width="200" height="200"><path d="M0 0h1024v1024H0z" fill="" fill-opacity="0" p-id="1572"></path><path d="M510.912 38.72a464 464 0 1 1 0 928 464 464 0 0 1 0-928z m149.888 736.512h-290.56a16.064 16.064 0 0 0-16 16.384l-0.256 44.16c47.616 22.4 100.8 34.944 156.928 34.944 59.712 0 116.096-14.208 165.952-39.424v-40.064a16 16 0 0 0-16-16zM510.912 134.72a368 368 0 0 0-250.944 637.184 112 112 0 0 1 110.336-92.672h290.56a112 112 0 0 1 108.736 85.12 368 368 0 0 0-258.688-629.632z m1.536 126.528a176 176 0 1 1 0 352 176 176 0 0 1 0-352z m0 96a80 80 0 1 0 0 160 80 80 0 0 0 0-160z" fill="" p-id="1573"></path></svg>').concat(i18n.memberCenter||"会员中心","</a>\n                </div>\n            "):"",e=i?'\n                <div class="sm_tab_content active" id="chat-tab">\n                    <div class="sm_output clearfix"></div>\n                    <div class="sm_quickLabel clearfix">'.concat(e,'</div>\n                    <div class="sm_input clearfix">\n                        <div class="sm_editor"></div>\n                        <div class="sm_send">\n                            <div class="erroMsg"></div>\n                            <a href="javascript:;" class="sm_sendBtn disabled">\n                                ').concat(n,"\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            "):'\n                <div class="sm_output clearfix"></div>\n                <div class="sm_quickLabel clearfix">'.concat(e,'</div>\n                <div class="sm_input clearfix">\n                    <div class="sm_editor"></div>\n                    <div class="sm_send">\n                        <div class="erroMsg"></div>\n                        <a href="javascript:;" class="sm_sendBtn disabled">\n                            ').concat(n,"\n                        </a>\n                    </div>\n                </div>\n            "),n=i?'\n                <div class="sm_tab_content" id="member-tab" style="display:none;">\n                    \x3c!-- 会员中心内容将在点击tab时动态加载 --\x3e\n                    <div class="member-loading">加载中...</div>\n                </div>\n            ':"",e=i?"\n                ".concat(c,"\n                ").concat(e,"\n                ").concat(n,"\n            "):"\n                ".concat(e,"\n            ");return'\n                <div class="'.concat(a,'" id="').concat(this.conId,'">\n                    <div class="sm_title">\n                        <span class="sm_mark">\n                            <svg t="1691993598192" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="814" width="200" height="200"><path d="M508.30872719 128.08273435c200.36824869 0 362.83837999 164.57253407 362.83837996 367.57335931 0 203.01910646-162.45184851 367.59164208-362.83837996 367.59164209v-55.13783256c170.33129377 0 308.41353791-139.89213981 308.41353633-312.43552832 0-172.57995248-138.08224413-312.45380951-308.41353633-312.45380952s-308.41353791 139.89213981-308.41353791 312.43552831c0 5.48453223 0.12797313 10.93250049 0.40219903 16.34390634H145.81770106c-0.23766351-5.41140585-0.36563506-10.8593741-0.36563663-16.34390634C145.45206443 292.65526841 307.94047692 128.08273435 508.32700838 128.08273435z" p-id="815"></path><path d="M508.30872719 240.40595711c139.16086813 0 251.95941786 114.27937278 251.95941629 255.25013655 0 140.98904501-112.79854975 255.26841777-251.95941629 255.26841777-36.65495788 0-71.46345612-7.91600767-102.87154529-22.1757924l-65.81438835 34.62568148c-9.89044049 5.19202354-22.06610207 1.27972351-27.18499926-8.72040577a20.65840542 20.65840542 0 0 1-2.01099519-12.76067896l12.10253519-73.76696156a256.18250777 256.18250777 0 0 1-66.18002497-172.47026056c0-140.97076381 112.79854975-255.25013657 251.95941787-255.25013655zM381.28695667 446.66093709c-24.4975775 0-44.33330364 20.10995203-44.33330366 44.91832098 0 24.80836739 19.85400733 44.91831942 44.33330366 44.91831943 24.4975775 0 44.35158484-20.10995203 44.35158486-44.91831943 0-24.80836739-19.85400733-44.91831942-44.35158486-44.91832098z m127.00348775 0c-24.4975775 0-44.35158484 20.10995203-44.35158488 44.91832098 0 24.80836739 19.85400733 44.91831942 44.35158488 44.91831943s44.33330364-20.10995203 44.33330363-44.91831943c0-24.80836739-19.85400733-44.91831942-44.33330363-44.91832098z m126.98520652 0c-24.4975775 0-44.35158484 20.10995203-44.35158484 44.91832098 0 24.80836739 19.85400733 44.91831942 44.35158484 44.91831943s44.35158484-20.10995203 44.35158484-44.91831943c0-24.80836739-19.85400733-44.91831942-44.35158484-44.91832098zM183.47815657 388.70771279l43.82141265 251.79488075a34.91819015 34.91819015 0 0 1-27.33125199 40.36615843l-0.65814374 0.10969033c-62.21287819 11.11531881-121.53723669-30.96932612-132.50630275-93.9866024L56.71233074 529.00205007c-10.96906446-63.03555904 30.5671271-123.12775168 92.79828807-134.24307046l33.96753776-6.06954959zM840.52513489 388.70771279L790.707299 674.89061152l33.98581895 6.06954959c62.21287819 11.11531881 121.53723669-30.96932612 132.50630273-93.98660398l10.09153845-57.97150706c10.96906446-63.03555904-30.5671271-123.12775168-92.7982881-134.24307046l-33.96753614-6.06954959zM464.96263993 808.10990319h86.6738933c23.94912413 0 43.32780605 19.65290783 43.32780446 43.89454063 0 24.25991557-19.37868034 43.91282183-43.32780446 43.91282183h-86.6556121c-23.94912413 0-43.36437003-19.65290783-43.36437003-43.91282183 0-24.2416328 19.41524431-43.89454063 43.34608883-43.89454063z" p-id="816"></path></svg>\n                        </span>\n                        <a href="javascript:;" class="sm_close">\n                            <svg t="1691998498613" class="icon" style="display:none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2026" width="200" height="200"><path d="M630.271841 512.828421l364.879547-365.730081A85.053507 85.053507 0 1 0 874.970782 26.83268l-364.879546 365.730082-364.879547-365.730082A85.053507 85.053507 0 0 0 25.031084 147.09834L389.91063 512.828421l-364.879546 365.730082a85.053507 85.053507 0 0 0 0 120.350712 85.053507 85.053507 0 0 0 120.180605 0l364.879547-365.730081 364.879546 365.730081a85.053507 85.053507 0 0 0 120.180606 0 85.053507 85.053507 0 0 0 0-120.350712z" p-id="2027"></path></svg>\n                            <svg t="1766710772080" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="59118" width="200" height="200"><path d="M512 62c-248.52 0-450 201.48-450 450s201.48 450 450 450 450-201.48 450-450c0-248.52-201.48-450-450-450zM752 542h-480v-60h480v60z" p-id="59119"></path></svg>\n                        </a>\n                        <div class="sm_admin">\n                            <img src="').concat(t,'" alt="').concat(this.settings.name,'" la="la" />\n                            <p>').concat(o,'</p>\n                        </div>\n                    </div>\n                    <div class="sm_dialog">\n                        ').concat(e,"\n                    </div>\n                </div>\n            ")}},{key:"getFormlog",value:function(){var e=this.colorLayout,t="smartService ".concat("right"==e.windowLocation?"rightWindow":"leftWindow"," ").concat(1==e.windowStyle?"bigWindow":"smallWindow"," ").concat(1!=e.entranceLocation?"near":""," smsForm"),e=JSON.parse(this.res.setting.moreSetting);return'\n            <div class="'.concat(t,'" id="').concat(this.conId,'-form" >\n                <div class="sm_title">\n                    <a href="javascript:;" class="sm_close">\n                        <svg t="1747379471975" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4982" width="128" height="128"><path d="M297.69350383 346.29910124L512 560.6055974 726.30649617 346.29910124a55.0126984 55.0126984 0 1 1 77.87942242 77.87942241L550.66354348 677.70089876a55.0126984 55.0126984 0 0 1-77.87942242 0L219.26174595 424.17852365c-10.49439069-10.49439069-16.01775312-24.30279805-16.01775442-38.66354347s6.07569919-28.72148955 16.01775442-39.21587894c21.54111683-20.98878007 56.89064234-21.54111683 78.43175788 0z" p-id="4983"></path></svg>\n                    </a>\n                    <div class="sm_formTitle">').concat(e.chatSurveyForm.title,'</div>\n                    <img src="/npublic/commonjs/smartService/formbg.png" alt="form" la="la" />\n                </div>\n                ').concat(this.getMsg(e.chatSurveyForm,"form"),"\n            </div>\n            ")}},{key:"showFun",value:function(){var e,t=this;this.nim&&this.nim.disconnect(),this.needForm?$("#"+this.conId+"-form").addClass("show"):($("#"+this.conId+"-form").remove(),$("#"+this.conId).addClass("show"),$(".smtIconPrompt").hide(),this.handleReply(!1),this.unreadMessageCount=0,this.clearUnreadCountFromStorage(),this.updateUnreadBadge(),setTimeout(function(){0===$(".sm_output").find(".sm_msg").length&&t.showLoadingMessage(),t.res.enableAgentFlag&&t.manageMessagesDisplay()},100),this.logNim(),window.ZQSensorsObj&&(e={tenantId:tenant.tenantId,iBusinessCode:"01",iBusinessName:"智慧客服业务线",iBusinessCustId:this.res.account},ZQSensorsObj.track("SmartServiceWakeUp",e)))}},{key:"arraySort",value:function(e,a,t){var n=/^([+]\d+[.]\d+|[-]\d+[.]\d+|\d+[.]\d+|[+]\d+|[-]\d+|\d+)$/;return"desc"==t?e.sort(function(e,t){return n.test(e[a])?t[a]-e[a]:t[a].localeCompare(e[a])}):e.sort(function(e,t){return n.test(e[a])?e[a]-t[a]:e[a].localeCompare(t[a])})}},{key:"getTerminal",value:function(){return this.isWxMini()?1:this.isWechat()?2:Boolean(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))||$(window).width()<=768?4:3}},{key:"isWechat",value:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},{key:"isWxMini",value:function(){return"miniprogram"===window.__wxjs_environment||"miniprogram"==navigator.userAgent.toLowerCase().match(/miniprogram/i)}},{key:"createGreetingPopup",value:function(){var e,t,a,n,o,i,c=this;this.shouldShowGreetingPopup()&&(0<$("#greetingPopup").length||(a=$.handleDataImg(this.kefuHead)||"/npublic/commonjs/smartService/kefu.png",e=this.colorLayout.tipTitle||i18n.AICustomerService||"您好！我是AI智能客服",t=this.colorLayout.tipText||i18n.AICustomerServiceInfo||"我可以帮您解答问题、推荐产品，随时为您服务!",i=this.colorLayout.tipLabels&&this.colorLayout.tipLabels.length?this.colorLayout.tipLabels:[],a='\n                    <div id="greetingPopup" class="greeting-popup '.concat("left"==this.colorLayout.windowLocation?"greeting-popup-left":"",'">\n                        <div class="greeting-content">\n                            <span class="greeting-close">&times;</span>\n                            <div class="greeting-info">\n                                <div class="greeting-img">\n                                    <img src="').concat(a,'" alt="').concat(this.settings.name,'" la="la" />\n                                </div>\n                                <div class="greeting-infoBox">\n                                    <div class="greeting-header">\n                                        <div class="greeting-title"></div>\n                                    </div>\n                                    <div class="greeting-body">\n                                        <div class="greeting-text"></div>\n                                        <div class="greeting-tags"></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="greeting-btn-box">\n                                <button class="greeting-btn">').concat(i18n.quickConsult||"立即咨询","</button>\n                            </div>\n                        </div>\n                    </div>\n                "),$("body").append(a),(n=$("#greetingPopup")).find(".greeting-close").on("click",function(){c.closeGreetingPopup()}),n.find(".greeting-btn").on("click",function(){n.remove(),c.showFun()}),e&&n.find(".greeting-title").text(e),t&&n.find(".greeting-text").text(t||"打招呼"),i&&Array.isArray(i)&&(o=["colors1","colors2","colors3","colors4"],i=i.map(function(e,t){return'<span class="greeting-tag '.concat(o[t%o.length],'">').concat(e,"</span>")}).join(""),n.find(".greeting-tags").html(i)),setTimeout(function(){n.addClass("show")},1e3)))}},{key:"shouldShowGreetingPopup",value:function(){var e=sessionStorage.getItem("greetingPopupClosedDate");if(!e)return!0;var t=new Date;return e!=="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}},{key:"closeGreetingPopup",value:function(){var e=new Date,e="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate());sessionStorage.setItem("greetingPopupClosedDate",e),$("#greetingPopup").fadeOut(300)}},{key:"showLoadingMessage",value:function(){var e,t=$(".sm_output");0===t.find(".loading-message").length&&(e="......".split("").map(function(e,t){return'<span style="animation-delay: '.concat(.1*t,'s">').concat(e,"</span>")}).join(""),t.append('\n                    <div class="loading-message bounce-text" style="min-height:'.concat($(".sm_output").height(),'px">').concat(e,"</div>\n                ")),t.scrollTop(99999999))}},{key:"hideLoadingMessage",value:function(){$(".sm_output .loading-message").remove()}},{key:"manageMessagesDisplay",value:function(){var e=this,t=$(".sm_output"),a=t.find(".sm_msg"),n=new Date;n.setHours(0,0,0,0);var o=n.getTime(),n=a.filter(function(){return(parseInt($(this).attr("data-time"))||0)<o}),a=a.filter(function(){var e=parseInt($(this).attr("data-time"))||0;return o<=e});t.find(".current-session-tip").remove(),n.hide(),a.show(),0<n.length?t.find(".load-more-messages").length||(n=$('\n                        <div class="load-more-messages">\n                            <a href="javascript:;">'.concat(i18n.viewHistory||"查看历史会话","</a>\n                        </div>\n                    ")),a.first().length?a.first().before(n):t.append(n),n.on("click",function(){e.loadMoreMessages()})):t.find(".load-more-messages").remove()}},{key:"loadMoreMessages",value:function(){var e=$(".sm_output"),t=e.find(".sm_msg"),a=new Date;a.setHours(0,0,0,0);var n=a.getTime(),o=t.filter(function(){return(parseInt($(this).attr("data-time"))||0)<n}),a=o.filter(":hidden"),t=Math.min(10,a.length);0<a.length&&a.slice(0,t).show();e=e.find(".load-more-messages");0<o.filter(":visible").length&&o.filter(":visible").last().after(e),a.length<=t&&e.remove()}},{key:"initPageObjListener",value:function(){var e=this;this.res.enableAgentFlag&&(this.pageObjInterval=setInterval(function(){e.checkPageObj()},1e3),this.checkPageObj())}},{key:"checkPageObj",value:function(){var e=this;window.pageObj&&"143150160001"===window.pageObj.appId&&"3"===window.pageObj.pageType?this.pageMatchTimer||(this.pageMatchTimer=setTimeout(function(){e.callBrowseReportApi()},3e4)):this.pageMatchTimer&&(clearTimeout(this.pageMatchTimer),this.pageMatchTimer=null)}},{key:"callBrowseReportApi",value:function(){this.hasCalledBrowseReport||this.behaviorReport("detail")}},{key:"cleanup",value:function(){this.pageObjInterval&&(clearInterval(this.pageObjInterval),this.pageObjInterval=null),this.pageMatchTimer&&(clearTimeout(this.pageMatchTimer),this.pageMatchTimer=null)}},{key:"updateUnreadBadge",value:function(){this.saveUnreadCountToStorage();var e,t=$("#"+this.iconId),a=t.find(".unread-badge");0<this.unreadMessageCount?0<a.length?a.text(this.unreadMessageCount):(e='<span class="unread-badge">'.concat(this.unreadMessageCount,"</span>"),t.append(e)):a.remove()}},{key:"saveUnreadCountToStorage",value:function(){localStorage.setItem("smartService_unreadCount",this.unreadMessageCount.toString())}},{key:"getUnreadCountFromStorage",value:function(){var e=localStorage.getItem("smartService_unreadCount");return e?parseInt(e):0}},{key:"clearUnreadCountFromStorage",value:function(){localStorage.removeItem("smartService_unreadCount")}},{key:"checkLoginAndSubmit",value:function(t,a,n){var o=this;this.isLogin().then(function(e){e?o.submitForm(t,a,n):o.showLoginPopup(function(){o.submitForm(t,a,n)})})}},{key:"showLoginPopup",value:function(t){var e,a,n,o,i,c,s=this;0<$("#loginPopup").length||(e='\n                <div id="loginPopup" class="greeting-popup">\n                    <div class="greeting-content">\n                        <div style="padding: 20px;">\n                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">\n                                <h3 style="margin: 0;">登录</h3>\n                                <span id="loginPopupClose" class="greeting-close" style="font-size: 24px; cursor: pointer;">&times;</span>\n                            </div>\n                            <div style="height: 600px;">\n                                <iframe \n                                    id="loginFrame" \n                                    src="'.concat("/login.html",'" \n                                    width="100%" \n                                    height="100%" \n                                    frameborder="0" \n                                    style="border-radius: 8px;">\n                                </iframe>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            '),$("body").append('<div id="loginPopupOverlay" class="login-popup-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 99998;"></div>').append(e),a=$("#loginPopup"),n=$("#loginPopupOverlay"),o=$(".login-prompt"),a.find("#loginPopupClose").on("click",function(){a.remove(),n.remove(),clearInterval(c)}),n.on("click",function(){a.remove(),n.remove()}),i=a.find("#loginFrame"),c=null,i.on("load",function(){c=setInterval(function(){try{var e=i[0].contentDocument||i[0].contentWindow.document;e.querySelector(".login-success")||e.querySelector("#loginSuccess")||e.querySelector(".user-logged-in");s.isLogin().then(function(e){e&&(clearInterval(c),a.remove(),n.remove(),o.remove(),t&&"function"==typeof t&&t())})}catch(e){}},2e3)}),setTimeout(function(){a.addClass("show")},100))}},{key:"behaviorReport",value:function(e){var t="/fwebapi/behavior/trace/report?tenantId=".concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance),a=sessionStorage.getItem("currentPageUrl")||"",n=sessionStorage.getItem("currentPageTitle")||"",o={visitorId:this.res.account,sessionId:sessionStorage.getItem("sdkSessionId")||"",jsonData:{source:this.getSensorsdata2015().refferUrl||"直接访问",lp:this.getSensorsdata2015().landUrl||"",vp:location.href||"",vpt:document.title||"",pp:a,ppt:n,pn:window.pageObj?pageObj.name:"",appCode:window.pageObj?pageObj.appId:"",tid:window.pageObj?pageObj.contentType:"",pageType:window.pageObj?pageObj.pageType:""}};s.cmsAjax.postJson(t,o).then(function(e){}).catch(function(e){}),"detail"==e&&(this.hasCalledBrowseReport=!0)}},{key:"initBehaviorReport",value:function(){var e=this;this.res.enableAgentFlag&&(this.behaviorReport(),this.behaviorReportTimer=setTimeout(function(){e.behaviorReport(),e.behaviorReportTimer&&(clearTimeout(e.behaviorReportTimer),e.behaviorReportTimer=null)},6e4))}},{key:"getSensorsdata2015",value:function(){var e=getCookie("sensorsdata2015jssdkcrossZQSensorsObj");if(e){e=JSON.parse(decodeURIComponent(e));var t=decodeURI(decodeURIComponent(escape(e.props.$latest_landing_page)),"UTF-8"),a=decodeURI(decodeURIComponent(escape(e.props.$latest_referrer)),"UTF-8");return a&&"undefined"!=a&&"null"!=a&&(a=(a=(a=(a=a.split("#")[0]).split("?")[0]).split("//")[1]).split("/")[0],[{name:"baidu",key:["m.baidu.com","www.baidu.com","baidu.com"]},{name:"google",key:["www.google.co.jp","www.google.la","www.google.co.id","www.google.kg","www.google.ae","www.google.com.lb","www.google.com.tr","www.google.az","www.google.no","www.google.ie","www.google.be","www.google.li","www.google.ad","www.google.com.mt","www.google.com.ua","www.google.hr","www.google.me","www.google.dz","www.google.sn","www.google.ci","www.google.tg","www.google.com.ng","www.google.cm","www.google.td","www.google.co.ke","www.google.mg","www.google.co.zm","www.google.nr","www.google.co.ck","www.google.co.ve","www.google.com.br","www.google.hn","www.google.com.ni","www.google.com.jm","www.google.co.kr","www.google.com.vn","www.google.com.kh","www.google.com.sg","www.google.tm","www.google.com.af","www.google.co.in","www.google.com.bd","www.google.am","www.google.se","www.google.fi","www.google.ee","www.google.lv","www.google.lt","www.google.co.uk","www.google.gg","www.google.fr","www.google.de","www.google.cz","www.google.hu","www.google.ba","www.google.mk","www.google.gm","www.google.ml","www.google.com.gh","www.google.ne","www.google.cf","www.google.it.ao","www.google.mu","www.google.com.na","www.google.co.za","www.google.com.nf","www.google.com.sb","www.google.fm","www.google.ws","www.google.gy","www.google.com.pe","www.google.com.ar","www.google.cl","www.google.com","www.google.com.gt","www.google.com.bz","www.google.com.sv","www.google.bs","www.google.com.tw","www.google.com.tj","www.google.com.np","www.google.lk","www.google.com.kw","www.google.com.bh","www.google.com.om","www.google.jo","www.google.co.il","www.google.nl","www.google.at","www.google.ch","www.google.gr","www.google.com.by","www.google.pl","www.google.sk","www.google.rs","www.google.ro","www.google.md","www.google.com.ly","www.google.com.sl","www.google.bj","www.google.sh","www.google.com.et","www.google.dj","www.google.co.ug","www.google.rw","www.google.bi","www.google.mw","www.google.co.mz","www.google.sc","www.google.com.au","www.google.ki","www.google.com.do","www.google.com.mx","www.google.com.pa","www.google.cn","www.google.mn","www.google.co.th","www.google.com.my","www.google.com.bn","www.google.com.ph","www.google.tp","www.google.kz","www.google.co.uz","www.google.com.pk","www.google.mv","www.google.com.sa","www.google.co.ls","www.google.is","www.google.dk","www.google.je","www.google.im","www.google.lu","www.google.pt","www.google.es","www.google.com.gi","www.google.it","www.google.sm","www.google.ru","www.google.si","www.google.bg","www.google.com.eg","www.google.co.ma","www.google.bf","www.google.ga","www.google.cg","www.google.cd","www.google.co.tz","www.google.co.zw","www.google.co.bw","www.google.co.nz","www.google.com.fj","www.google.tk","www.google.as","www.google.to","www.google.nu","www.google.tt","www.google.com.co","www.google.com.ec","www.google.com.bo","www.google.com.py","www.google.com.uy","www.google.gl","www.google.co.cr","www.google.com.cu","www.google.ht","www.google.com.hk"]},{name:"sougou",key:["sogou.com","www.sogou.com","m.sogou.com","wap.sogou.com"]},{name:"bing",key:["bing.com","cn.bing.com","www.bing.com"]},{name:"360",key:["www.so.com","so.com","m.so.com"]},{name:"yandex",key:["www.yandex.com","yandex.com","yandex.ru","www.yandex.ru","yandex.ua","yandex.kz","yandex.com.tr","yandex.by","yandex.az","yandex.com.ge","yandex.uz","yandex.md","yandex.ee","yandex.lt","yandex.lv","yandex.ro","yandex.pl","yandex.es","yandex.it","yandex.de","yandex.dk","yandex.no","yandex.pt","yandex.rs","yandex.sk","yandex.tj","www.yandex.ua","www.yandex.kz","www.yandex.com.tr","www.yandex.by","www.yandex.az","www.yandex.com.ge","www.yandex.uz","www.yandex.md","www.yandex.ee","www.yandex.lt","www.yandex.lv","www.yandex.ro","www.yandex.pl","www.yandex.es","www.yandex.it","www.yandex.de","www.yandex.dk","www.yandex.no","www.yandex.pt","www.yandex.rs","www.yandex.sk","www.yandex.tj"]},{name:"other",key:["www.aol.com","duckduckgo.com","www.fresheye.com","www.sputtr.com","searcn.yahoo.com","www.search.aol.com","fresheye.com","www.seznam.com","www.duckduckgo.com","search.aol.com","m.ask.com","www.lycos.com","search.naver.com","www.soso.com","www.youdao.com","www.ask.com","www.ceek.jp","www.hotbot.com","www.naver.com","www.search.com","m.sm.cn","www.altavista.com"]}].forEach(function(e){e.key.find(function(e){return a==e})&&(a=e.name)})),{landUrl:t,refferUrl:a}}return""}}]),t}()});